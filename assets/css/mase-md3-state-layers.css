/**
 * Material Design 3 State Layer System
 * 
 * Provides visual feedback for interactive states:
 * - Hover: 8% opacity
 * - Focus: 12% opacity  
 * - Pressed: 12% opacity
 * 
 * @package ModernAdminStyler
 * @since 1.3.0
 */

/* ============================================
   State Layer Base
   ============================================ */

.mase-state-layer {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: currentColor;
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--md-duration-short-4, 200ms) var(--md-easing-standard, ease);
    z-index: 0;
}

/* Ensure content is above state layer */
.mase-state-layer ~ * {
    position: relative;
    z-index: 1;
}

/* ============================================
   State Layer Types
   ============================================ */

/* Hover State - 8% opacity */
.mase-state-layer--hover.active {
    opacity: 0.08;
}

/* Focus State - 12% opacity */
.mase-state-layer--focus.active {
    opacity: 0.12;
}

/* Pressed State - 12% opacity */
.mase-state-layer--pressed.active {
    opacity: 0.12;
}

/* ============================================
   Disabled States
   ============================================ */

/* Disabled elements - 38% opacity, no state layers */
:disabled,
.disabled {
    opacity: 0.38;
    cursor: not-allowed;
    pointer-events: none;
}

:disabled .mase-state-layer,
.disabled .mase-state-layer {
    display: none;
}

/* ============================================
   Component-Specific State Layers
   ============================================ */

/* Buttons */
.mase-button-filled,
.mase-button-outlined,
.mase-button-text,
.button,
.button-primary,
.button-secondary {
    position: relative;
    overflow: hidden;
}

/* Use on-primary color for filled buttons */
.mase-button-filled .mase-state-layer {
    background: var(--md-on-primary, #ffffff);
}

/* Use primary color for outlined and text buttons */
.mase-button-outlined .mase-state-layer,
.mase-button-text .mase-state-layer {
    background: var(--md-primary, #6750a4);
}

/* Navigation Tabs */
.mase-nav-tab,
.nav-tab {
    position: relative;
    overflow: hidden;
}

.mase-nav-tab .mase-state-layer,
.nav-tab .mase-state-layer {
    background: var(--md-on-surface, #1c1b1f);
}

/* Active tab uses primary container color */
.mase-nav-tab.active .mase-state-layer,
.nav-tab-active .mase-state-layer {
    background: var(--md-on-primary-container, #22005d);
}

/* Cards */
.mase-template-card,
.mase-palette-card,
.mase-card {
    position: relative;
    overflow: hidden;
}

.mase-template-card .mase-state-layer,
.mase-palette-card .mase-state-layer,
.mase-card .mase-state-layer {
    background: var(--md-on-surface, #1c1b1f);
}

/* Form Controls */
.mase-input-wrapper,
.mase-select-wrapper,
.mase-checkbox-wrapper {
    position: relative;
    display: inline-block;
}

.mase-input-wrapper .mase-state-layer,
.mase-select-wrapper .mase-state-layer {
    background: var(--md-on-surface, #1c1b1f);
    border-radius: var(--md-corner-xs, 4px);
}

.mase-checkbox-wrapper .mase-state-layer {
    background: var(--md-primary, #6750a4);
    border-radius: 50%;
}

/* ============================================
   Dark Mode Adjustments
   ============================================ */

[data-theme="dark"] .mase-state-layer--hover.active {
    opacity: 0.10; /* Slightly higher in dark mode */
}

[data-theme="dark"] .mase-state-layer--focus.active {
    opacity: 0.14;
}

[data-theme="dark"] .mase-state-layer--pressed.active {
    opacity: 0.14;
}

/* ============================================
   Accessibility
   ============================================ */

/* Ensure state layers don't interfere with focus indicators */
*:focus-visible {
    outline: 3px solid var(--md-primary, #6750a4);
    outline-offset: 2px;
    z-index: 2;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .mase-state-layer--hover.active {
        opacity: 0.15;
    }
    
    .mase-state-layer--focus.active {
        opacity: 0.20;
    }
    
    .mase-state-layer--pressed.active {
        opacity: 0.20;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .mase-state-layer {
        transition-duration: 0.01ms;
    }
}

/* ============================================
   Performance Optimizations
   ============================================ */

/* GPU acceleration for state layers */
.mase-state-layer {
    will-change: opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* Remove will-change when not active */
.mase-state-layer:not(.active) {
    will-change: auto;
}
