/**
 * Enhanced Floral Theme Effects
 * Implements organic animations and nature-inspired effects
 * Requirements: 10.1, 10.2, 10.3, 10.4, 10.5
 */

/* ============================================
   11.1 Floating Petal Animation
   ============================================ */

/* Petal floating animation keyframes */
@keyframes petalFloat {
    0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(-100vh) translateX(var(--petal-drift, 20px)) rotate(360deg);
        opacity: 0;
    }
}

/* Create floating petal elements using pseudo-elements */
.mase-template-floral::before {
    content: 'ðŸŒ¸';
    position: fixed;
    left: 10%;
    bottom: -50px;
    font-size: 24px;
    animation: petalFloat 12s linear infinite;
    pointer-events: none;
    z-index: 1;
    --petal-drift: 30px;
}

.mase-template-floral::after {
    content: 'ðŸŒº';
    position: fixed;
    left: 30%;
    bottom: -50px;
    font-size: 20px;
    animation: petalFloat 10s linear infinite 2s;
    pointer-events: none;
    z-index: 1;
    --petal-drift: -20px;
}

/* Additional petals using data attributes */
.mase-template-floral[data-petals="enabled"] {
    position: relative;
}

/* Petal container for multiple petals */
.mase-floral-petals {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

.mase-floral-petal {
    position: absolute;
    font-size: 20px;
    animation: petalFloat 11s linear infinite;
    opacity: 0;
}

/* Randomized petal positions and delays */
.mase-floral-petal:nth-child(1) {
    left: 15%;
    animation-delay: 0s;
    animation-duration: 12s;
    --petal-drift: 25px;
}

.mase-floral-petal:nth-child(2) {
    left: 45%;
    animation-delay: 3s;
    animation-duration: 10s;
    --petal-drift: -30px;
}

.mase-floral-petal:nth-child(3) {
    left: 75%;
    animation-delay: 6s;
    animation-duration: 11s;
    --petal-drift: 15px;
}

.mase-floral-petal:nth-child(4) {
    left: 25%;
    animation-delay: 9s;
    animation-duration: 13s;
    --petal-drift: -20px;
}

.mase-floral-petal:nth-child(5) {
    left: 60%;
    animation-delay: 4s;
    animation-duration: 10.5s;
    --petal-drift: 35px;
}

/* ============================================
   11.2 Organic Shape Morphing
   ============================================ */

/* Shape morphing animation using border-radius */
@keyframes organicMorph {
    0%, 100% {
        border-radius: 28px 32px 28px 32px / 32px 28px 32px 28px;
    }
    25% {
        border-radius: 32px 28px 32px 28px / 28px 32px 28px 32px;
    }
    50% {
        border-radius: 28px 32px 28px 32px / 32px 28px 32px 28px;
    }
    75% {
        border-radius: 32px 28px 32px 28px / 28px 32px 28px 32px;
    }
}

/* Apply organic morphing to cards and containers */
.mase-template-floral .mase-card,
.mase-template-floral .wrap,
.mase-template-floral .postbox {
    transition: border-radius 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.mase-template-floral .mase-card:hover,
.mase-template-floral .wrap:hover,
.mase-template-floral .postbox:hover {
    animation: organicMorph 4s ease-in-out infinite;
}

/* Smooth bezier curve morphing for buttons */
@keyframes buttonMorph {
    0%, 100% {
        border-radius: 24px 26px 24px 26px / 26px 24px 26px 24px;
    }
    50% {
        border-radius: 26px 24px 26px 24px / 24px 26px 24px 26px;
    }
}

.mase-template-floral .button:hover,
.mase-template-floral .button-primary:hover {
    animation: buttonMorph 2s ease-in-out infinite;
}

/* ============================================
   11.3 Bloom Effect on Focus
   ============================================ */

/* Expanding ring animation for bloom effect */
@keyframes bloom {
    0% {
        box-shadow: 
            0 0 0 0 rgba(232, 67, 147, 0.7),
            0 0 0 0 rgba(253, 121, 168, 0.5);
        transform: scale(1);
    }
    50% {
        box-shadow: 
            0 0 0 10px rgba(232, 67, 147, 0.3),
            0 0 0 20px rgba(253, 121, 168, 0.2);
        transform: scale(1.02);
    }
    100% {
        box-shadow: 
            0 0 0 20px rgba(232, 67, 147, 0),
            0 0 0 40px rgba(253, 121, 168, 0);
        transform: scale(1);
    }
}

/* Apply bloom effect to focused elements */
.mase-template-floral input[type="text"]:focus,
.mase-template-floral input[type="password"]:focus,
.mase-template-floral input[type="email"]:focus,
.mase-template-floral input[type="number"]:focus,
.mase-template-floral textarea:focus,
.mase-template-floral select:focus {
    animation: bloom 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Bloom effect for buttons on focus */
.mase-template-floral .button:focus,
.mase-template-floral .button-primary:focus {
    animation: bloom 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    outline: none;
}

/* Color fade-out for bloom rings */
@keyframes bloomFade {
    0% {
        box-shadow: 
            0 0 0 0 rgba(232, 67, 147, 0.8),
            0 0 20px rgba(253, 121, 168, 0.6);
    }
    100% {
        box-shadow: 
            0 0 0 30px rgba(232, 67, 147, 0),
            0 0 40px rgba(253, 121, 168, 0);
    }
}

/* ============================================
   11.4 Gentle Sway Animation
   ============================================ */

/* Subtle rotation animation for natural sway */
@keyframes gentleSway {
    0%, 100% {
        transform: rotate(0deg) translateX(0);
    }
    25% {
        transform: rotate(0.5deg) translateX(2px);
    }
    50% {
        transform: rotate(0deg) translateX(0);
    }
    75% {
        transform: rotate(-0.5deg) translateX(-2px);
    }
}

/* Apply sway to menu items */
.mase-template-floral #adminmenu li {
    transition: transform 0.3s ease;
}

.mase-template-floral #adminmenu li:hover {
    animation: gentleSway 3s ease-in-out infinite;
}

/* Natural easing for menu item icons */
.mase-template-floral #adminmenu .wp-menu-image {
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.mase-template-floral #adminmenu li:hover .wp-menu-image {
    transform: rotate(5deg) scale(1.1);
}

/* Sway effect for admin bar items */
.mase-template-floral #wpadminbar .ab-item {
    transition: transform 0.3s ease;
}

.mase-template-floral #wpadminbar .ab-item:hover {
    animation: gentleSway 2.5s ease-in-out infinite;
}

/* ============================================
   11.5 Flower Bloom on Click
   ============================================ */

/* Bloom keyframe animation for button clicks */
@keyframes flowerBloom {
    0% {
        transform: scale(1) rotate(0deg);
        box-shadow: 
            0 6px 20px rgba(232, 67, 147, 0.3),
            0 0 0 0 rgba(232, 67, 147, 0.7);
    }
    30% {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 
            0 12px 32px rgba(232, 67, 147, 0.5),
            0 0 0 10px rgba(232, 67, 147, 0.4);
    }
    60% {
        transform: scale(1.05) rotate(-3deg);
        box-shadow: 
            0 10px 28px rgba(232, 67, 147, 0.4),
            0 0 0 20px rgba(232, 67, 147, 0.2);
    }
    100% {
        transform: scale(1) rotate(0deg);
        box-shadow: 
            0 6px 20px rgba(232, 67, 147, 0.3),
            0 0 0 30px rgba(232, 67, 147, 0);
    }
}

/* Petal expansion effect */
@keyframes petalExpand {
    0% {
        clip-path: polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%);
        opacity: 1;
    }
    100% {
        clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
        opacity: 0;
    }
}

/* Apply bloom animation to buttons on click */
.mase-template-floral .button:active,
.mase-template-floral .button-primary:active {
    animation: flowerBloom 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Create petal expansion overlay */
.mase-template-floral .button::before,
.mase-template-floral .button-primary::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle,
        rgba(232, 67, 147, 0.4) 0%,
        rgba(253, 121, 168, 0.3) 30%,
        rgba(255, 234, 167, 0.2) 60%,
        transparent 100%
    );
    transform: translate(-50%, -50%) scale(0);
    border-radius: 50%;
    pointer-events: none;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.mase-template-floral .button:active::before,
.mase-template-floral .button-primary:active::before {
    transform: translate(-50%, -50%) scale(2);
    opacity: 0;
}

/* Multiple petal layers for bloom effect */
.mase-template-floral .button::after,
.mase-template-floral .button-primary::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120%;
    height: 120%;
    background: radial-gradient(
        circle,
        transparent 40%,
        rgba(232, 67, 147, 0.2) 50%,
        rgba(253, 121, 168, 0.15) 70%,
        transparent 100%
    );
    transform: translate(-50%, -50%) scale(0) rotate(0deg);
    border-radius: 50%;
    pointer-events: none;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.mase-template-floral .button:active::after,
.mase-template-floral .button-primary:active::after {
    transform: translate(-50%, -50%) scale(2.5) rotate(180deg);
    opacity: 0;
}

/* Ensure buttons have position relative for pseudo-elements */
.mase-template-floral .button,
.mase-template-floral .button-primary {
    position: relative;
    overflow: hidden;
}

/* ============================================
   Performance Optimizations
   ============================================ */

/* Reduce animations on mobile devices */
@media (max-width: 768px) {
    .mase-template-floral::before,
    .mase-template-floral::after,
    .mase-floral-petal {
        animation-duration: 8s;
    }
    
    .mase-template-floral .mase-card:hover,
    .mase-template-floral .wrap:hover {
        animation: none;
    }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .mase-template-floral::before,
    .mase-template-floral::after,
    .mase-floral-petal {
        animation: none;
        display: none;
    }
    
    .mase-template-floral .mase-card:hover,
    .mase-template-floral .wrap:hover,
    .mase-template-floral .button:hover,
    .mase-template-floral #adminmenu li:hover {
        animation: none;
    }
    
    .mase-template-floral input:focus,
    .mase-template-floral .button:focus,
    .mase-template-floral .button:active {
        animation: none;
    }
}

/* Performance mode - disable expensive effects */
:root[data-performance-mode="true"] .mase-template-floral::before,
:root[data-performance-mode="true"] .mase-template-floral::after,
:root[data-performance-mode="true"] .mase-floral-petal {
    display: none;
}

:root[data-performance-mode="true"] .mase-template-floral .mase-card:hover,
:root[data-performance-mode="true"] .mase-template-floral .wrap:hover {
    animation: none;
}

/* ============================================
   Intensity Controls Integration
   ============================================ */

/* Apply intensity multiplier to animations */
.mase-template-floral[data-intensity="low"]::before,
.mase-template-floral[data-intensity="low"]::after {
    animation-duration: calc(12s * 1.5);
}

.mase-template-floral[data-intensity="high"]::before,
.mase-template-floral[data-intensity="high"]::after {
    animation-duration: calc(12s * 0.7);
}

/* Adjust bloom intensity */
.mase-template-floral[data-intensity="low"] input:focus {
    animation-duration: 0.9s;
}

.mase-template-floral[data-intensity="high"] input:focus {
    animation-duration: 0.4s;
}

/* ============================================
   Dark Mode Optimizations
   ============================================ */

/* Adjust effects for dark mode */
:root[data-theme="dark"] .mase-template-floral::before,
:root[data-theme="dark"] .mase-template-floral::after {
    filter: brightness(1.3);
}

:root[data-theme="dark"] .mase-template-floral input:focus {
    box-shadow: 
        0 0 0 3px rgba(232, 67, 147, 0.3),
        0 4px 16px rgba(232, 67, 147, 0.4);
}

:root[data-theme="dark"] .mase-template-floral .button:active::before {
    background: radial-gradient(
        circle,
        rgba(232, 67, 147, 0.6) 0%,
        rgba(253, 121, 168, 0.4) 30%,
        rgba(255, 234, 167, 0.3) 60%,
        transparent 100%
    );
}
