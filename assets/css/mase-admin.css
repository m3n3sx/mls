/**
 * Modern Admin Styler Enterprise (MASE) - Optimized Admin Styles
 * 
 * Visual Redesign v2.0.0 - October 2025
 * 
 * This stylesheet implements a comprehensive visual redesign of the MASE
 * settings page, focusing on modern aesthetics, improved user experience,
 * and enhanced accessibility while maintaining 100% functional compatibility.
 * 
 * Key Features:
 * - Design token system for consistent theming
 * - Modern component styling with smooth interactions
 * - Full dark mode support with proper contrast
 * - Responsive design for all screen sizes
 * - WCAG 2.1 AA accessibility compliance
 * - Optimized performance (28KB minified)
 * 
 * @version 2.0.0
 * @license GPL-2.0+
 * @author Modern Admin Styler Team
 * @see docs/VISUAL-REDESIGN-CHANGELOG.md for detailed changes
 * @see docs/VISUAL-REDESIGN-ROLLBACK.md for rollback procedures
 */

/* ============================================================================
   CSS VARIABLES & DESIGN TOKENS
   
   A comprehensive design token system that ensures visual consistency across
   all components and enables easy theming. All values are defined as CSS
   custom properties for efficient runtime changes and dark mode support.
   
   Organization:
   1. Color System (Primary, Semantic, Neutral, Surface)
   2. Spacing Scale (8-point grid system)
   3. Typography (Sizes, Weights, Line Heights, Families)
   4. Border Radius (6-step scale)
   5. Shadows (Elevation system)
   6. Transitions (Timing and easing)
   7. Z-Index (Layering scale)
   ============================================================================ */

:root {
  /* ===== Primary Colors =====
     WordPress 5.9+ blue palette for consistency with admin interface.
     Used for: buttons, links, active states, focus indicators */
  --mase-primary: #2271b1;           /* Main brand color */
  --mase-primary-hover: #135e96;     /* Hover/active state */
  --mase-primary-light: #f0f6fc;     /* Backgrounds, badges */
  
  /* ===== Semantic Colors =====
     Status and feedback colors with light variants for backgrounds.
     Used for: success messages, warnings, errors, status indicators */
  --mase-success: #00a32a;           /* Success state */
  --mase-success-light: #e7f7ed;     /* Success background */
  --mase-warning: #dba617;           /* Warning state */
  --mase-warning-light: #fef8ee;     /* Warning background */
  --mase-error: #d63638;             /* Error state */
  --mase-error-light: #fcf0f1;       /* Error background */
  
  /* ===== Neutral Palette =====
     10-step gray scale for backgrounds, borders, and text.
     Provides consistent neutral colors across all components */
  --mase-gray-50: #f9fafb;           /* Lightest gray */
  --mase-gray-100: #f3f4f6;          /* Very light gray */
  --mase-gray-200: #e5e7eb;          /* Light gray */
  --mase-gray-300: #d1d5db;          /* Medium-light gray */
  --mase-gray-400: #9ca3af;          /* Medium gray */
  --mase-gray-500: #6b7280;          /* True gray */
  --mase-gray-600: #4b5563;          /* Medium-dark gray */
  --mase-gray-700: #374151;          /* Dark gray */
  --mase-gray-800: #1f2937;          /* Very dark gray */
  --mase-gray-900: #111827;          /* Darkest gray */
  
  /* ===== Surface Colors =====
     Semantic color names for different surface types and text.
     Automatically adjusted in dark mode via :root[data-theme="dark"] */
  --mase-background: #f0f0f1;        /* Page background */
  --mase-surface: #ffffff;           /* Card/panel background */
  --mase-surface-elevated: #ffffff;  /* Elevated elements (modals, dropdowns) */
  --mase-text: #1e1e1e;              /* Primary text color */
  --mase-text-secondary: #646970;    /* Secondary/helper text */
  --mase-border: #dcdcde;            /* Border color */
  
  /* ===== Spacing Scale =====
     8-point grid system for consistent spacing throughout the interface.
     Used for: padding, margin, gap between elements */
  --mase-space-xs: 4px;              /* Extra small - tight spacing */
  --mase-space-sm: 8px;              /* Small - compact spacing */
  --mase-space-md: 16px;             /* Medium - default spacing */
  --mase-space-lg: 24px;             /* Large - comfortable spacing */
  --mase-space-xl: 32px;             /* Extra large - generous spacing */
  --mase-space-2xl: 48px;            /* 2X large - section spacing */
  
  /* Typography */
  --mase-font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  --mase-font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
  --mase-font-size-xs: 12px;
  --mase-font-size-sm: 13px;
  --mase-font-size-base: 14px;
  --mase-font-size-lg: 16px;
  --mase-font-size-xl: 18px;
  --mase-font-size-2xl: 24px;
  --mase-font-size-3xl: 30px;
  --mase-font-weight-normal: 400;
  --mase-font-weight-medium: 500;
  --mase-font-weight-semibold: 600;
  --mase-font-weight-bold: 700;
  --mase-line-height-tight: 1.25;
  --mase-line-height-normal: 1.5;
  --mase-line-height-relaxed: 1.75;
  
  /* Border Radius */
  --mase-radius-sm: 4px;
  --mase-radius-base: 4px;
  --mase-radius-md: 6px;
  --mase-radius-lg: 8px;
  --mase-radius-xl: 12px;
  --mase-radius-full: 9999px;
  
  /* Shadows */
  --mase-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
  --mase-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06);
  --mase-shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  --mase-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
  --mase-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.10);
  --mase-shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.12);
  --mase-shadow-focus: 0 0 0 3px rgba(34, 113, 177, 0.1);
  
  /* Transitions */
  --mase-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --mase-transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --mase-transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Z-Index Scale */
  --mase-z-base: 1;
  --mase-z-dropdown: 100;
  --mase-z-sticky: 200;
  --mase-z-fixed: 300;
  --mase-z-modal-backdrop: 400;
  --mase-z-modal: 500;
  --mase-z-toast: 600;
}

/* Dark Mode */
:root[data-theme="dark"] {
  --mase-primary: #4a9eff;
  --mase-primary-hover: #6cb0ff;
  --mase-primary-light: #1a3a52;
  --mase-success: #46d369;
  --mase-success-light: #1a3a24;
  --mase-warning: #f5c542;
  --mase-warning-light: #3a3420;
  --mase-error: #ff6b6b;
  --mase-error-light: #3a1f1f;
  --mase-gray-50: #1a1a1a;
  --mase-gray-100: #2d2d2d;
  --mase-gray-200: #3a3a3a;
  --mase-gray-300: #4a4a4a;
  --mase-gray-400: #6b6b6b;
  --mase-gray-500: #8a8a8a;
  --mase-gray-600: #a0a0a0;
  --mase-gray-700: #b8b8b8;
  --mase-gray-800: #d0d0d0;
  --mase-gray-900: #e8e8e8;
  --mase-background: #1a1a1a;
  --mase-surface: #2d2d2d;
  --mase-surface-elevated: #3a3a3a;
  --mase-text: #e4e4e7;
  --mase-text-secondary: #a1a1aa;
  --mase-border: #3f3f46;
  --mase-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.4);
  --mase-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.5);
  --mase-shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.4);
  --mase-shadow-md: 0 4px 8px rgba(0, 0, 0, 0.5);
  --mase-shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.6);
  --mase-shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.7);
  --mase-shadow-focus: 0 0 0 3px rgba(74, 158, 255, 0.3);
}

/* ============================================================================
   RESET & BASE STYLES
   ============================================================================ */

*, *::before, *::after {
  box-sizing: border-box;
}

* {
  margin: 0;
  padding: 0;
}

button, input, select, textarea {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;
  background: none;
  border: none;
  outline: none;
}

button {
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

input, textarea, select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

ul, ol {
  list-style: none;
}

img {
  max-width: 100%;
  height: auto;
  display: block;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

fieldset {
  border: none;
  padding: 0;
  margin: 0;
}

body {
  font-family: var(--mase-font-sans);
  font-size: var(--mase-font-size-base);
  font-weight: var(--mase-font-weight-normal);
  line-height: var(--mase-line-height-normal);
  color: var(--mase-text);
  background-color: var(--mase-background);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: var(--mase-font-weight-semibold);
  line-height: var(--mase-line-height-tight);
  color: var(--mase-text);
  margin-bottom: var(--mase-space-md);
}

h1 { font-size: var(--mase-font-size-2xl); }
h2 { font-size: var(--mase-font-size-xl); }
h3 { font-size: var(--mase-font-size-lg); }
h4 { font-size: var(--mase-font-size-base); }
h5 { font-size: var(--mase-font-size-sm); }
h6 { font-size: var(--mase-font-size-xs); }

p {
  margin-bottom: var(--mase-space-md);
  line-height: var(--mase-line-height-normal);
  color: var(--mase-text);
}

a {
  color: var(--mase-primary);
  text-decoration: none;
  transition: color var(--mase-transition-base);
  cursor: pointer;
}

a:hover {
  color: var(--mase-primary-hover);
  text-decoration: underline;
}

a:focus {
  outline: 2px solid var(--mase-primary);
  outline-offset: 2px;
  border-radius: var(--mase-radius-sm);
}

/* ============================================================================
   LAYOUT STRUCTURE
   ============================================================================ */

.mase-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--mase-space-lg);
  padding: var(--mase-space-xl) var(--mase-space-lg);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--mase-border);
  box-shadow: var(--mase-shadow-sm);
  position: sticky;
  top: 32px;
  z-index: var(--mase-z-sticky);
  will-change: transform;
}

@supports not (backdrop-filter: blur(8px)) {
  .mase-header {
    background: rgba(255, 255, 255, 1);
  }
}

:root[data-theme="dark"] .mase-header {
  background: rgba(45, 45, 45, 0.95);
}

@supports not (backdrop-filter: blur(8px)) {
  :root[data-theme="dark"] .mase-header {
    background: rgba(45, 45, 45, 1);
  }
}

.mase-header-left {
  display: flex;
  align-items: center;
  gap: var(--mase-space-md);
}

.mase-header h1 {
  font-size: var(--mase-font-size-3xl);
  font-weight: var(--mase-font-weight-semibold);
  letter-spacing: -0.02em;
  margin: 0;
}

.mase-version-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 12px;
  background: var(--mase-primary-light);
  color: var(--mase-primary);
  border-radius: var(--mase-radius-full);
  font-size: var(--mase-font-size-xs);
  font-weight: var(--mase-font-weight-semibold);
}

.mase-subtitle {
  font-size: var(--mase-font-size-sm);
  color: var(--mase-text-secondary);
  margin-top: var(--mase-space-xs);
}

.mase-header-right {
  display: flex;
  align-items: center;
  gap: var(--mase-space-sm);
}

/* Tab Navigation */
.mase-tab-nav {
  display: flex;
  gap: var(--mase-space-xs);
  padding: var(--mase-space-md) var(--mase-space-lg);
  background: var(--mase-surface);
  border-bottom: 1px solid var(--mase-border);
  overflow-x: auto;
  scrollbar-width: thin;
}

.mase-tab-button {
  display: flex;
  align-items: center;
  gap: var(--mase-space-sm);
  padding: var(--mase-space-sm) var(--mase-space-md);
  border: none;
  background: transparent;
  color: var(--mase-text-secondary);
  font-size: var(--mase-font-size-sm);
  font-weight: var(--mase-font-weight-medium);
  border-radius: var(--mase-radius-md);
  cursor: pointer;
  transition: all var(--mase-transition-base);
  position: relative;
}

.mase-tab-button:hover {
  background: var(--mase-gray-100);
  color: var(--mase-text);
}

.mase-tab-button.active {
  background: var(--mase-primary-light);
  color: var(--mase-primary);
  font-weight: var(--mase-font-weight-semibold);
}

.mase-tab-button.active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--mase-primary);
}

/* Content Area */
.mase-content {
  padding: var(--mase-space-lg);
  max-width: 1400px;
  margin: 0 auto;
}

.mase-section-card {
  background: var(--mase-surface);
  border: 1px solid var(--mase-border);
  border-radius: var(--mase-radius-lg);
  padding: var(--mase-space-xl);
  margin-bottom: var(--mase-space-lg);
  box-shadow: var(--mase-shadow-xs);
  transition: box-shadow var(--mase-transition-base);
}

.mase-section-card:hover {
  box-shadow: var(--mase-shadow-sm);
}

.mase-section-card h2 {
  font-size: var(--mase-font-size-xl);
  font-weight: var(--mase-font-weight-semibold);
  margin-bottom: var(--mase-space-sm);
}

.mase-section-card .description {
  font-size: var(--mase-font-size-sm);
  color: var(--mase-text-secondary);
  margin-bottom: var(--mase-space-lg);
  line-height: 1.6;
}

/* ============================================================================
   FORM CONTROLS
   ============================================================================ */

/* Toggle Switches */
.mase-toggle-switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
}

.mase-toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.mase-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--mase-gray-300);
  border-radius: var(--mase-radius-full);
  transition: all var(--mase-transition-base);
}

.mase-toggle-slider::before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 2px;
  bottom: 2px;
  background: white;
  border-radius: 50%;
  transition: transform var(--mase-transition-base);
  box-shadow: var(--mase-shadow-sm);
  will-change: transform;
}

.mase-toggle-switch input:checked + .mase-toggle-slider {
  background: var(--mase-primary);
}

.mase-toggle-switch input:checked + .mase-toggle-slider::before {
  transform: translateX(20px);
}

.mase-toggle-switch input:focus + .mase-toggle-slider {
  box-shadow: 0 0 0 3px var(--mase-primary-light);
}

/* Color Pickers */
.mase-color-picker-wrapper {
  display: flex;
  align-items: center;
  gap: var(--mase-space-sm);
}

.mase-color-swatch {
  width: 40px;
  height: 40px;
  border-radius: var(--mase-radius-md);
  border: 2px solid var(--mase-border);
  cursor: pointer;
  transition: transform var(--mase-transition-base);
  box-shadow: var(--mase-shadow-xs);
  will-change: transform;
}

.mase-color-swatch:hover {
  transform: scale(1.05);
  box-shadow: var(--mase-shadow-sm);
}

.mase-color-input {
  flex: 1;
  padding: var(--mase-space-sm) var(--mase-space-md);
  border: 1px solid var(--mase-border);
  border-radius: var(--mase-radius-md);
  font-family: var(--mase-font-mono);
  font-size: var(--mase-font-size-sm);
  transition: all var(--mase-transition-base);
}

.mase-color-input:focus {
  outline: none;
  border-color: var(--mase-primary);
  box-shadow: 0 0 0 3px var(--mase-primary-light);
}

/* Range Sliders */
.mase-range-wrapper {
  display: flex;
  align-items: center;
  gap: var(--mase-space-md);
}

.mase-range-input {
  flex: 1;
  height: 6px;
  border-radius: var(--mase-radius-full);
  background: var(--mase-gray-200);
  outline: none;
  -webkit-appearance: none;
}

.mase-range-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--mase-primary);
  cursor: pointer;
  box-shadow: var(--mase-shadow-md);
  transition: transform var(--mase-transition-base);
  will-change: transform;
}

.mase-range-input::-webkit-slider-thumb:hover {
  transform: scale(1.1);
  box-shadow: var(--mase-shadow-lg);
}

.mase-range-input::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--mase-primary);
  cursor: pointer;
  box-shadow: var(--mase-shadow-md);
  border: none;
  transition: transform var(--mase-transition-base);
  will-change: transform;
}

.mase-range-input::-moz-range-thumb:hover {
  transform: scale(1.1);
  box-shadow: var(--mase-shadow-lg);
}

.mase-range-value {
  min-width: 48px;
  padding: var(--mase-space-xs) var(--mase-space-sm);
  background: var(--mase-gray-100);
  border-radius: var(--mase-radius-md);
  font-size: var(--mase-font-size-sm);
  font-weight: var(--mase-font-weight-semibold);
  text-align: center;
}

/* Text Inputs and Selects */
.mase-input, .mase-select {
  width: 100%;
  padding: var(--mase-space-sm) var(--mase-space-md);
  border: 1px solid var(--mase-border);
  border-radius: var(--mase-radius-md);
  font-size: var(--mase-font-size-sm);
  color: var(--mase-text);
  background: var(--mase-surface);
  transition: all var(--mase-transition-base);
}

.mase-input:hover, .mase-select:hover {
  border-color: var(--mase-gray-400);
}

.mase-input:focus, .mase-select:focus {
  outline: none;
  border-color: var(--mase-primary);
  box-shadow: 0 0 0 3px var(--mase-primary-light);
}

.mase-input:disabled, .mase-select:disabled {
  background: var(--mase-gray-100);
  color: var(--mase-text-secondary);
  cursor: not-allowed;
  opacity: 0.6;
}

/* ============================================================================
   COMPONENTS
   ============================================================================ */

/* Buttons */
.button {
  display: inline-flex;
  align-items: center;
  gap: var(--mase-space-sm);
  padding: var(--mase-space-sm) var(--mase-space-lg);
  border: none;
  border-radius: var(--mase-radius-md);
  font-size: var(--mase-font-size-sm);
  font-weight: var(--mase-font-weight-medium);
  cursor: pointer;
  transition: all var(--mase-transition-base);
  text-decoration: none;
}

.button-primary {
  background: var(--mase-primary);
  color: white;
  box-shadow: var(--mase-shadow-sm);
}

.button-primary:hover {
  background: var(--mase-primary-hover);
  box-shadow: var(--mase-shadow-md);
  transform: translateY(-1px);
}

.button-secondary {
  background: var(--mase-surface);
  color: var(--mase-text);
  border: 1px solid var(--mase-border);
}

.button-secondary:hover {
  background: var(--mase-gray-100);
  border-color: var(--mase-gray-400);
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

.button:focus {
  outline: none;
  box-shadow: var(--mase-shadow-focus);
}

/* Palette Cards */
.mase-palette-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--mase-space-lg);
  margin-top: var(--mase-space-lg);
}

.mase-palette-card {
  background: var(--mase-surface);
  border: 2px solid var(--mase-border);
  border-radius: var(--mase-radius-lg);
  padding: var(--mase-space-lg);
  cursor: pointer;
  transition: all var(--mase-transition-base);
  position: relative;
  overflow: hidden;
}

.mase-palette-card:hover {
  border-color: var(--mase-primary);
  box-shadow: var(--mase-shadow-md);
  transform: translateY(-2px);
}

.mase-palette-card.active {
  border-color: var(--mase-primary);
  background: var(--mase-primary-light);
  box-shadow: var(--mase-shadow-lg);
}

.mase-palette-preview {
  display: flex;
  gap: var(--mase-space-xs);
  margin-bottom: var(--mase-space-md);
  height: 60px;
}

.mase-palette-color {
  flex: 1;
  border-radius: var(--mase-radius-sm);
  transition: transform var(--mase-transition-base);
  will-change: transform;
}

.mase-palette-card:hover .mase-palette-color {
  transform: scale(1.05);
}

.mase-palette-name {
  font-size: var(--mase-font-size-lg);
  font-weight: var(--mase-font-weight-semibold);
  margin-bottom: var(--mase-space-xs);
}

.mase-active-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 12px;
  background: var(--mase-primary);
  color: white;
  border-radius: var(--mase-radius-full);
  font-size: var(--mase-font-size-xs);
  font-weight: var(--mase-font-weight-semibold);
}

/* ============================================================================
   RESPONSIVE DESIGN
   ============================================================================ */

@media (max-width: 768px) {
  .mase-header {
    flex-direction: column;
    align-items: flex-start;
    padding: var(--mase-space-lg);
  }
  
  .mase-header-right {
    width: 100%;
    justify-content: space-between;
  }
  
  .mase-tab-nav {
    flex-wrap: wrap;
  }
  
  .mase-content {
    padding: var(--mase-space-md);
  }
  
  .mase-section-card {
    padding: var(--mase-space-lg);
  }
  
  .mase-palette-grid {
    grid-template-columns: 1fr;
  }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .mase-palette-grid {
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  }
}

/* ============================================================================
   UTILITY CLASSES
   ============================================================================ */

.mase-hidden {
  display: none !important;
}

.mase-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.mase-loading {
  opacity: 0.6;
  pointer-events: none;
}

.mase-error {
  border-color: var(--mase-error) !important;
}

.mase-success {
  border-color: var(--mase-success) !important;
}

.mase-disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

.mase-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ============================================================================
   REDUCED MOTION SUPPORT
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================================================
   DARK MODE FAB (Floating Action Button)
   ============================================================================ */

.mase-dark-mode-fab {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  background-color: var(--mase-primary);
  color: white;
  border-radius: var(--mase-radius-full);
  box-shadow: var(--mase-shadow-lg);
  cursor: pointer;
  z-index: var(--mase-z-fixed);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--mase-transition-base);
  will-change: transform, opacity;
}

.mase-dark-mode-fab:hover {
  background-color: var(--mase-primary-hover);
  transform: translateY(-2px);
  box-shadow: var(--mase-shadow-xl);
}

.mase-dark-mode-fab:active {
  transform: translateY(0);
  box-shadow: var(--mase-shadow-md);
}

.mase-dark-mode-fab:focus {
  outline: 3px solid var(--mase-primary-light);
  outline-offset: 3px;
}

.mase-dark-mode-fab .dashicons {
  font-size: 24px;
  width: 24px;
  height: 24px;
  transition: transform var(--mase-transition-slow);
  will-change: transform;
}

.mase-dark-mode-fab.mase-icon-rotating .dashicons,
.mase-dark-mode-fab.mase-fab-rotating .dashicons {
  transform: rotate(360deg);
}

body.mase-dark-mode .mase-dark-mode-fab {
  background-color: var(--mase-primary);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
}

body.mase-dark-mode .mase-dark-mode-fab:hover {
  background-color: var(--mase-primary-hover);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
}

@media (max-width: 768px) {
  .mase-dark-mode-fab {
    bottom: 16px;
    right: 16px;
    width: 48px;
    height: 48px;
  }
  
  .mase-dark-mode-fab .dashicons {
    font-size: 20px;
    width: 20px;
    height: 20px;
  }
}

@media (prefers-reduced-motion: reduce) {
  .mase-dark-mode-fab,
  .mase-dark-mode-fab .dashicons {
    will-change: auto;
  }
  
  .mase-dark-mode-fab:hover {
    transform: none;
  }
  
  .mase-dark-mode-fab.mase-icon-rotating .dashicons,
  .mase-dark-mode-fab.mase-fab-rotating .dashicons {
    transform: none;
  }
}

/* ============================================================================
   SETTING ROWS
   ============================================================================ */

.mase-setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--mase-space-md) 0;
  border-bottom: 1px solid var(--mase-border);
}

.mase-setting-row:last-child {
  border-bottom: none;
}

.mase-setting-label {
  flex: 1;
  font-weight: var(--mase-font-weight-medium);
  color: var(--mase-text);
}

.mase-setting-description {
  font-size: var(--mase-font-size-sm);
  color: var(--mase-text-secondary);
  margin-top: var(--mase-space-xs);
}

.mase-setting-control {
  flex-shrink: 0;
  margin-left: var(--mase-space-lg);
}

@media (max-width: 768px) {
  .mase-setting-row {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .mase-setting-control {
    margin-left: 0;
    margin-top: var(--mase-space-md);
    width: 100%;
  }
}

/* ============================================================================
   NOTICES & ALERTS
   ============================================================================ */

.mase-notice {
  padding: var(--mase-space-md);
  border-radius: var(--mase-radius-md);
  margin-bottom: var(--mase-space-md);
  display: flex;
  align-items: flex-start;
  gap: var(--mase-space-sm);
}

.mase-notice-success {
  background: var(--mase-success-light);
  border-left: 4px solid var(--mase-success);
  color: var(--mase-success);
}

.mase-notice-warning {
  background: var(--mase-warning-light);
  border-left: 4px solid var(--mase-warning);
  color: var(--mase-warning);
}

.mase-notice-error {
  background: var(--mase-error-light);
  border-left: 4px solid var(--mase-error);
  color: var(--mase-error);
}

/* ============================================================================
   LOADING STATES
   ============================================================================ */

.mase-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid var(--mase-gray-300);
  border-top-color: var(--mase-primary);
  border-radius: 50%;
  animation: mase-spin 0.6s linear infinite;
}

@keyframes mase-spin {
  to { transform: rotate(360deg); }
}

.mase-loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--mase-z-modal);
}

:root[data-theme="dark"] .mase-loading-overlay {
  background: rgba(26, 26, 26, 0.8);
}

/* ============================================================================
   TEMPLATE CARDS
   ============================================================================ */

.mase-template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--mase-space-lg);
  margin-top: var(--mase-space-lg);
}

.mase-template-card {
  background: var(--mase-surface);
  border: 2px solid var(--mase-border);
  border-radius: var(--mase-radius-lg);
  padding: var(--mase-space-md);
  cursor: pointer;
  transition: all var(--mase-transition-base);
}

.mase-template-card:hover {
  border-color: var(--mase-primary);
  box-shadow: var(--mase-shadow-md);
  transform: translateY(-2px);
}

.mase-template-card.active {
  border-color: var(--mase-primary);
  background: var(--mase-primary-light);
}

.mase-template-thumbnail {
  width: 100%;
  height: 120px;
  border-radius: var(--mase-radius-md);
  margin-bottom: var(--mase-space-sm);
  background: var(--mase-gray-100);
}

.mase-template-name {
  font-weight: var(--mase-font-weight-semibold);
  margin-bottom: var(--mase-space-xs);
}

/* ============================================================================
   BACKGROUND CONTROLS
   ============================================================================ */

.mase-background-type-selector {
  display: flex;
  gap: var(--mase-space-sm);
  margin-bottom: var(--mase-space-lg);
}

.mase-background-type-button {
  flex: 1;
  padding: var(--mase-space-md);
  border: 2px solid var(--mase-border);
  border-radius: var(--mase-radius-md);
  background: var(--mase-surface);
  cursor: pointer;
  transition: all var(--mase-transition-base);
  text-align: center;
}

.mase-background-type-button:hover {
  border-color: var(--mase-primary);
}

.mase-background-type-button.active {
  border-color: var(--mase-primary);
  background: var(--mase-primary-light);
  color: var(--mase-primary);
}

/* ============================================================================
   GRADIENT BUILDER
   ============================================================================ */

.mase-gradient-preview {
  width: 100%;
  height: 100px;
  border-radius: var(--mase-radius-md);
  border: 1px solid var(--mase-border);
  margin-bottom: var(--mase-space-md);
}

.mase-gradient-stops {
  display: flex;
  flex-direction: column;
  gap: var(--mase-space-sm);
}

.mase-gradient-stop {
  display: flex;
  align-items: center;
  gap: var(--mase-space-sm);
  padding: var(--mase-space-sm);
  background: var(--mase-gray-50);
  border-radius: var(--mase-radius-md);
}

/* ============================================================================
   POSITION PICKER
   ============================================================================ */

.mase-position-picker {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--mase-space-xs);
  width: fit-content;
  padding: var(--mase-space-sm);
  background: var(--mase-gray-50);
  border-radius: var(--mase-radius-md);
}

.mase-position-option {
  width: 40px;
  height: 40px;
  border: 2px solid var(--mase-border);
  border-radius: var(--mase-radius-sm);
  background: var(--mase-surface);
  cursor: pointer;
  transition: all var(--mase-transition-base);
}

.mase-position-option:hover {
  border-color: var(--mase-primary);
}

.mase-position-option.active {
  border-color: var(--mase-primary);
  background: var(--mase-primary);
}

/* ============================================================================
   ACCESSIBILITY FOCUS INDICATORS
   ============================================================================ */

.mase-tab-button:focus-visible,
.button:focus-visible,
.mase-palette-card:focus-visible,
.mase-template-card:focus-visible {
  outline: 2px solid var(--mase-primary);
  outline-offset: 2px;
}

/* ============================================================================
   RTL SUPPORT
   ============================================================================ */

[dir="rtl"] .mase-header-left {
  flex-direction: row-reverse;
}

[dir="rtl"] .mase-header-right {
  flex-direction: row-reverse;
}

[dir="rtl"] .mase-dark-mode-fab {
  right: auto;
  left: 20px;
}

[dir="rtl"] .mase-setting-control {
  margin-left: 0;
  margin-right: var(--mase-space-lg);
}

@media (max-width: 768px) {
  [dir="rtl"] .mase-dark-mode-fab {
    left: 16px;
  }
  
  [dir="rtl"] .mase-setting-control {
    margin-right: 0;
  }
}
