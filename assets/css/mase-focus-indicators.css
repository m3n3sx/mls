/**
 * Enhanced Focus Indicators
 * Modern Admin Styler - Accessibility Enhancement
 * 
 * Provides visible, high-contrast focus indicators for all interactive elements
 * Ensures 3px minimum outline with high-contrast colors
 * 
 * @package ModernAdminStyler
 * @since 1.3.0
 * Requirements: 17.3
 */

/* ============================================
   BASE FOCUS STYLES
   ============================================ */

/**
 * Default focus indicator
 * 3px solid outline with high contrast color
 */
*:focus {
	outline: 3px solid var(--mase-focus-color, #0066ff);
	outline-offset: 2px;
	transition: outline-color 150ms ease;
}

/* Remove default browser outline */
*:focus:not(:focus-visible) {
	outline: none;
}

/* Keyboard focus only (focus-visible) */
*:focus-visible {
	outline: 3px solid var(--mase-focus-color, #0066ff);
	outline-offset: 2px;
}

/* ============================================
   FOCUS COLOR VARIABLES
   ============================================ */

:root {
	/* Light mode focus color */
	--mase-focus-color: #0066ff;
	--mase-focus-color-secondary: #0044cc;
	--mase-focus-shadow: rgba(0, 102, 255, 0.3);
}

/* Dark mode focus color */
body.mase-dark-mode,
:root[data-theme="dark"] {
	--mase-focus-color: #66b3ff;
	--mase-focus-color-secondary: #4499ff;
	--mase-focus-shadow: rgba(102, 179, 255, 0.3);
}

/* High contrast mode focus color */
:root[data-high-contrast="true"],
body[data-high-contrast="true"] {
	--mase-focus-color: #0000ff;
	--mase-focus-color-secondary: #0000cc;
	--mase-focus-shadow: rgba(0, 0, 255, 0.5);
}

body.mase-dark-mode[data-high-contrast="true"] {
	--mase-focus-color: #ffff00;
	--mase-focus-color-secondary: #cccc00;
	--mase-focus-shadow: rgba(255, 255, 0, 0.5);
}

/* ============================================
   BUTTON FOCUS STYLES
   ============================================ */

button:focus-visible,
.button:focus-visible,
input[type="button"]:focus-visible,
input[type="submit"]:focus-visible,
input[type="reset"]:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

.button-primary:focus-visible {
	outline-color: var(--mase-focus-color);
	box-shadow: 
		0 0 0 6px var(--mase-focus-shadow),
		0 2px 8px rgba(0, 0, 0, 0.2);
}

.button-secondary:focus-visible {
	outline-color: var(--mase-focus-color);
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   LINK FOCUS STYLES
   ============================================ */

a:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	text-decoration: underline;
	text-decoration-thickness: 2px;
	text-underline-offset: 4px;
}

/* Menu links */
#adminmenu a:focus-visible,
.mase-menu-item:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: -3px; /* Inside the element for menu items */
	background: var(--mase-focus-shadow);
}

/* ============================================
   FORM INPUT FOCUS STYLES
   ============================================ */

input[type="text"]:focus-visible,
input[type="email"]:focus-visible,
input[type="url"]:focus-visible,
input[type="password"]:focus-visible,
input[type="search"]:focus-visible,
input[type="number"]:focus-visible,
input[type="tel"]:focus-visible,
input[type="date"]:focus-visible,
input[type="time"]:focus-visible,
input[type="datetime-local"]:focus-visible,
textarea:focus-visible,
select:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 0;
	border-color: var(--mase-focus-color);
	box-shadow: 
		0 0 0 1px var(--mase-focus-color),
		0 0 0 4px var(--mase-focus-shadow);
}

/* ============================================
   CHECKBOX AND RADIO FOCUS STYLES
   ============================================ */

input[type="checkbox"]:focus-visible,
input[type="radio"]:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* Custom checkbox/radio wrappers */
.mase-toggle:focus-within,
.mase-checkbox-wrapper:focus-within,
.mase-radio-wrapper:focus-within {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   TAB FOCUS STYLES
   ============================================ */

.mase-tab:focus-visible,
.nav-tab:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: -3px;
	z-index: 10;
}

.mase-tab.active:focus-visible {
	outline-color: var(--mase-focus-color);
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   CARD FOCUS STYLES
   ============================================ */

.mase-card:focus-visible,
.mase-palette-card:focus-visible,
.mase-template-card:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 
		0 0 0 6px var(--mase-focus-shadow),
		0 4px 12px rgba(0, 0, 0, 0.15);
	transform: translateY(-2px);
}

/* ============================================
   MODAL AND DIALOG FOCUS STYLES
   ============================================ */

.mase-modal:focus-visible,
.mase-dialog:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: -3px;
}

.mase-modal-close:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   SLIDER FOCUS STYLES
   ============================================ */

input[type="range"]:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
}

input[type="range"]:focus-visible::-webkit-slider-thumb {
	box-shadow: 
		0 0 0 3px var(--mase-focus-color),
		0 0 0 6px var(--mase-focus-shadow);
}

input[type="range"]:focus-visible::-moz-range-thumb {
	box-shadow: 
		0 0 0 3px var(--mase-focus-color),
		0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   COLOR PICKER FOCUS STYLES
   ============================================ */

.mase-color-picker:focus-visible,
input[type="color"]:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   DROPDOWN FOCUS STYLES
   ============================================ */

.mase-dropdown:focus-visible,
.mase-select-wrapper:focus-within {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   ICON BUTTON FOCUS STYLES
   ============================================ */

.mase-icon-button:focus-visible,
.dashicons-button:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: 2px;
	border-radius: 4px;
	box-shadow: 0 0 0 6px var(--mase-focus-shadow);
}

/* ============================================
   THEME-SPECIFIC FOCUS ADJUSTMENTS
   ============================================ */

/* Terminal theme */
:root[data-template="terminal"] {
	--mase-focus-color: #00ff41;
	--mase-focus-shadow: rgba(0, 255, 65, 0.3);
}

:root[data-template="terminal"][data-variant="blue"] {
	--mase-focus-color: #00d4ff;
	--mase-focus-shadow: rgba(0, 212, 255, 0.3);
}

:root[data-template="terminal"][data-variant="amber"] {
	--mase-focus-color: #ffb000;
	--mase-focus-shadow: rgba(255, 176, 0, 0.3);
}

:root[data-template="terminal"][data-variant="red"] {
	--mase-focus-color: #ff0040;
	--mase-focus-shadow: rgba(255, 0, 64, 0.3);
}

/* Gaming theme */
:root[data-template="gaming"] {
	--mase-focus-color: #00f5ff;
	--mase-focus-shadow: rgba(0, 245, 255, 0.4);
}

:root[data-template="gaming"][data-variant="neon"] {
	--mase-focus-color: #ff10f0;
	--mase-focus-shadow: rgba(255, 16, 240, 0.4);
}

:root[data-template="gaming"][data-variant="matrix"] {
	--mase-focus-color: #00ff00;
	--mase-focus-shadow: rgba(0, 255, 0, 0.4);
}

/* Glass theme */
:root[data-template="glass"] {
	--mase-focus-color: #0066ff;
	--mase-focus-shadow: rgba(0, 102, 255, 0.3);
}

/* Gradient theme */
:root[data-template="gradient"] {
	--mase-focus-color: #e73c7e;
	--mase-focus-shadow: rgba(231, 60, 126, 0.3);
}

/* Floral theme */
:root[data-template="floral"] {
	--mase-focus-color: #e84393;
	--mase-focus-shadow: rgba(232, 67, 147, 0.3);
}

/* Retro theme */
:root[data-template="retro"] {
	--mase-focus-color: #ff6b6b;
	--mase-focus-shadow: rgba(255, 107, 107, 0.3);
}

/* Professional theme */
:root[data-template="professional"] {
	--mase-focus-color: #3498db;
	--mase-focus-shadow: rgba(52, 152, 219, 0.3);
}

/* Minimal theme */
:root[data-template="minimal"] {
	--mase-focus-color: #000000;
	--mase-focus-shadow: rgba(0, 0, 0, 0.2);
}

:root[data-template="minimal"][data-variant="dark"] {
	--mase-focus-color: #ffffff;
	--mase-focus-shadow: rgba(255, 255, 255, 0.2);
}

/* ============================================
   FOCUS WITHIN STYLES
   ============================================ */

/**
 * Highlight parent containers when child elements are focused
 */
.mase-setting-row:focus-within {
	background: var(--mase-focus-shadow);
	border-radius: 4px;
}

.mase-section-card:focus-within {
	box-shadow: 
		0 0 0 2px var(--mase-focus-color),
		0 4px 12px rgba(0, 0, 0, 0.1);
}

/* ============================================
   SKIP LINK STYLES
   ============================================ */

.mase-skip-links {
	position: absolute;
	top: -9999px;
	left: -9999px;
	z-index: 999999;
}

.skip-link {
	position: absolute;
	top: -9999px;
	left: -9999px;
	padding: 12px 20px;
	background: var(--mase-focus-color, #0066ff);
	color: #ffffff;
	font-weight: 600;
	text-decoration: none;
	border-radius: 4px;
	white-space: nowrap;
	z-index: 999999;
}

.skip-link:focus,
.skip-link:focus-visible {
	position: fixed;
	top: 10px;
	left: 10px;
	outline: 3px solid #ffffff;
	outline-offset: 2px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.skip-link:focus + .skip-link,
.skip-link:focus-visible + .skip-link {
	position: fixed;
	top: 60px;
	left: 10px;
}

.skip-link:focus + .skip-link + .skip-link,
.skip-link:focus-visible + .skip-link + .skip-link {
	position: fixed;
	top: 110px;
	left: 10px;
}

/* ============================================
   FOCUS TRAP STYLES
   ============================================ */

/**
 * Ensure focus is visible when trapped in modals/dialogs
 */
.mase-focus-trap:focus-visible {
	outline: 3px solid var(--mase-focus-color);
	outline-offset: -3px;
}

/* ============================================
   REDUCED MOTION ADJUSTMENTS
   ============================================ */

@media (prefers-reduced-motion: reduce) {
	*:focus-visible {
		transition: none;
	}
	
	.mase-card:focus-visible {
		transform: none;
	}
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
	*:focus {
		outline: 2px solid #000000;
	}
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

@media (max-width: 768px) {
	/* Larger focus indicators on mobile for touch targets */
	*:focus-visible {
		outline-width: 4px;
		outline-offset: 3px;
	}
	
	button:focus-visible,
	.button:focus-visible {
		box-shadow: 0 0 0 8px var(--mase-focus-shadow);
	}
}

/* ============================================
   WINDOWS HIGH CONTRAST MODE
   ============================================ */

@media (prefers-contrast: high) {
	*:focus-visible {
		outline: 3px solid currentColor;
		outline-offset: 2px;
	}
}

/* ============================================
   FOCUS INDICATOR UTILITIES
   ============================================ */

/* Force visible focus (for testing) */
.mase-force-focus-visible:focus {
	outline: 3px solid var(--mase-focus-color) !important;
	outline-offset: 2px !important;
}

/* Hide focus indicator (use sparingly, ensure alternative indication) */
.mase-hide-focus-indicator:focus {
	outline: none;
}

/* Custom focus ring */
.mase-custom-focus-ring:focus-visible {
	outline: none;
	box-shadow: 
		0 0 0 3px var(--mase-focus-color),
		0 0 0 6px var(--mase-focus-shadow);
	border-radius: 4px;
}
