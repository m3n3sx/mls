/* mase-md3-motion.js - Minified for production */
!function($){"use strict";class e{constructor(){this.animatingElements=new Set,this.rafId=null,this.isLowEndDevice=this.detectLowEndDevice(),this.init()}init(){this.isLowEndDevice&&document.documentElement.classList.add("md-low-end-device"),this.setupAnimationObservers(),this.setupWillChangeManagement(),this.setupRAFAnimations(),console.log("MD3 Motion System initialized",{lowEndDevice:this.isLowEndDevice})}detectLowEndDevice(){return!!(navigator.deviceMemory&&navigator.deviceMemory<4)||!!(navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4)||!!window.matchMedia("(prefers-reduced-motion: reduce)").matches||!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(!navigator.deviceMemory||navigator.deviceMemory<6)}setupAnimationObservers(){const e=this;$(document).on("animationstart",function(t){const n=t.target;n.classList.add("animating"),e.animatingElements.add(n)}),$(document).on("animationend",function(t){const n=t.target;n.classList.remove("animating"),n.classList.add("animation-complete"),e.animatingElements.delete(n),setTimeout(()=>{n.classList.remove("animation-complete")},100)}),$(document).on("transitionstart",function(t){const n=t.target;n.classList.add("animating"),e.animatingElements.add(n)}),$(document).on("transitionend",function(t){const n=t.target;n.classList.remove("animating"),e.animatingElements.delete(n)})}setupWillChangeManagement(){const e=this;$(".mase-template-card").on("mouseenter",function(){e.isLowEndDevice||(this.style.willChange="transform, box-shadow")}).on("mouseleave",function(){setTimeout(()=>{this.style.willChange="auto"},300)}),$(".mase-button-filled, .mase-button-outlined, .mase-button-text").on("mouseenter",function(){e.isLowEndDevice||(this.style.willChange="transform, box-shadow")}).on("mouseleave",function(){setTimeout(()=>{this.style.willChange="auto"},300)}),$(".mase-md3-tab").on("mouseenter",function(){e.isLowEndDevice||(this.style.willChange="transform, background-color")}).on("mouseleave",function(){setTimeout(()=>{this.style.willChange="auto"},200)}),$(".mase-toggle").on("mouseenter",function(){e.isLowEndDevice||(this.style.willChange="background-color, border-color")}).on("mouseleave",function(){setTimeout(()=>{this.style.willChange="auto"},300)})}setupRAFAnimations(){const e=this;$(".md-use-raf").each(function(){const t=this;let n=null,i=!1;$(t).on("click",function(o){i||(i=!0,n=null,t.style.willChange="transform, opacity",e.rafId=requestAnimationFrame(function o(a){n||(n=a),a-n<300?e.rafId=requestAnimationFrame(o):(i=!1,t.style.willChange="auto")}))})})}animateWithRAF(e,t={}){const{duration:n=300,easing:i="easeOutCubic",properties:o={},onComplete:a=null}=t;if(this.isLowEndDevice)return Object.keys(o).forEach(t=>{e.style[t]=o[t].to}),void(a&&a());const s=performance.now(),c={};Object.keys(o).forEach(t=>{const n=window.getComputedStyle(e);c[t]=parseFloat(n[t])||o[t].from}),e.style.willChange=Object.keys(o).join(", "),e.classList.add("animating");const r=t=>{const m=t-s,l=Math.min(m/n,1),u=this.easingFunctions[i](l);Object.keys(o).forEach(t=>{const n=c[t],i=n+(o[t].to-n)*u;e.style[t]=i+(o[t].unit||"")}),l<1?requestAnimationFrame(r):(e.classList.remove("animating"),setTimeout(()=>{e.style.willChange="auto"},100),a&&a())};requestAnimationFrame(r)}easingFunctions={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,emphasized:e=>this.cubicBezier(e,.2,0,0,1),standard:e=>this.cubicBezier(e,.2,0,0,1)};cubicBezier(e,t,n,i,o){const a=3*t,s=3*(i-t)-a,c=1-a-s,r=3*n,m=3*(o-n)-r,l=1-r-m,u=e=>((c*e+s)*e+a)*e;let d=0,h=1,g=e;for(let t=0;t<8;t++){const t=u(g);if(Math.abs(t-e)<.001)break;t<e?d=g:h=g,g=(h+d)/2}return(e=>((l*e+m)*e+r)*e)(g)}profileAnimation(e,t){const n=performance.now();let i=0,o=n;const a=()=>{const s=performance.now(),c=1e3/(s-o);if(i++,o=s,c<55&&console.warn(`Animation "${e}" FPS drop:`,c.toFixed(2)),t&&!1!==t())requestAnimationFrame(a);else{const t=s-n,o=i/t*1e3;console.log(`Animation "${e}" complete:`,{totalTime:t.toFixed(2)+"ms",frames:i,avgFps:o.toFixed(2)})}};requestAnimationFrame(a)}batchDOMOperations(e,t){const n=e.map(e=>e());requestAnimationFrame(()=>{t.forEach((e,t)=>e(n[t]))})}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.animatingElements.clear()}}$(document).ready(function(){window.maseMotionManager=new e,window.location.search.includes("debug=performance")&&$(".mase-template-card").on("mouseenter",function(){const e=this;window.maseMotionManager.profileAnimation("template-card-hover",function(){return e.matches(":hover")})})})}(jQuery);