/* mase-md3-settings.js - Minified for production */
!function($){"use strict";const e={init:function(){this.initCollapsibleSections(),this.initSaveFeedback(),this.initConditionalGroups(),console.log("[MASE MD3 Settings] Initialized")},initCollapsibleSections:function(){const e=this,t=this.getExpandedSections();let s;$(".mase-section-collapsible").each(function(){const s=$(this),n=s.attr("id")||s.data("section-id");n&&t.includes(n)&&s.addClass("expanded"),e.updateContentHeight(s)}),$(document).on("click",".mase-section-collapsible-header",function(t){t.preventDefault();const s=$(this).closest(".mase-section-collapsible");e.toggleSection(s)}),$(document).on("keydown",".mase-section-collapsible-header",function(t){if("Enter"===t.key||" "===t.key){t.preventDefault();const s=$(this).closest(".mase-section-collapsible");e.toggleSection(s)}}),$(window).on("resize",function(){clearTimeout(s),s=setTimeout(function(){$(".mase-section-collapsible.expanded").each(function(){e.updateContentHeight($(this))})},250)})},toggleSection:function(e){const t=e.hasClass("expanded"),s=e.attr("id")||e.data("section-id");t?(e.removeClass("expanded"),e.find(".mase-section-collapsible-content").css("max-height","0"),e.find(".mase-section-collapsible-header").attr("aria-expanded","false"),s&&this.removeExpandedSection(s)):(e.addClass("expanded"),this.updateContentHeight(e),e.find(".mase-section-collapsible-header").attr("aria-expanded","true"),s&&this.addExpandedSection(s))},updateContentHeight:function(e){const t=e.find(".mase-section-collapsible-content"),s=e.find(".mase-section-collapsible-body");if(e.hasClass("expanded")){const e=s.outerHeight(!0);t.css("max-height",e+"px")}},getExpandedSections:function(){try{const e=localStorage.getItem("mase_expanded_sections");return e?JSON.parse(e):[]}catch(e){return console.warn("[MASE MD3 Settings] Failed to load expanded sections:",e),[]}},addExpandedSection:function(e){try{const t=this.getExpandedSections();t.includes(e)||(t.push(e),localStorage.setItem("mase_expanded_sections",JSON.stringify(t)))}catch(e){console.warn("[MASE MD3 Settings] Failed to save expanded section:",e)}},removeExpandedSection:function(e){try{const t=this.getExpandedSections(),s=t.indexOf(e);s>-1&&(t.splice(s,1),localStorage.setItem("mase_expanded_sections",JSON.stringify(t)))}catch(e){console.warn("[MASE MD3 Settings] Failed to remove expanded section:",e)}},initSaveFeedback:function(){const e=this;$(document).on("mase:settings:saved",function(t,s){e.showSaveSuccess(s)}),$(document).on("mase:palette:applied mase:template:applied",function(t,s){e.showSaveSuccess({message:s.message||"Changes applied successfully!"})})},showSaveSuccess:function(e){const t=e.message||"Settings saved successfully!";let s=$(".mase-save-success");0===s.length&&(s=$('<div class="mase-save-success"><span class="dashicons dashicons-yes-alt"></span><span class="mase-save-success-text"></span></div>'),$("body").append(s)),s.find(".mase-save-success-text").text(t),setTimeout(function(){s.addClass("show")},10),setTimeout(function(){s.removeClass("show")},3e3)},showSectionSaveIndicator:function(e,t){t=t||"Saved";let s=e.find(".mase-section-save-indicator");0===s.length&&(s=$('<span class="mase-section-save-indicator"><span class="dashicons dashicons-yes"></span><span>'+t+"</span></span>"),e.find("h2, h3").first().append(s)),s.addClass("show"),setTimeout(function(){s.removeClass("show")},2e3)},initConditionalGroups:function(){$(document).on("change",'input[type="checkbox"], select',function(){const e=$(this),t=e.attr("id");t&&$('[data-depends-on="'+t+'"]').each(function(){const t=$(this),s=t.data("value");if(e.is('input[type="checkbox"]')){const n=e.is(":checked");void 0===s?t.toggle(n):t.toggle(n&&e.val()===s)}else if(e.is("select")){const n=e.val();void 0===s?t.show():t.toggle(n===s)}})}),$('input[type="checkbox"], select').each(function(){$(this).trigger("change")})}};$(document).ready(function(){$(".mase-settings-wrap").length>0&&e.init()}),window.MaseSettingsPanel=e}(jQuery);const MaseTemplateSearch={init:function(){this.searchInput=$("#mase-template-search"),this.clearButton=$("#mase-template-search-clear"),this.emptyState=$("#mase-template-empty-state"),this.emptyStateClearBtn=$("#mase-empty-state-clear"),this.templateCards=$(".mase-template-card"),0!==this.searchInput.length&&(this.bindEvents(),console.log("[MASE Template Search] Initialized"))},bindEvents:function(){const e=this;this.searchInput.on("input",function(){const t=$(this).val();e.filterTemplates(t),e.toggleClearButton(t)}),this.clearButton.on("click",function(){e.clearSearch()}),this.emptyStateClearBtn.on("click",function(){e.clearSearch()}),this.searchInput.on("keydown",function(t){"Escape"===t.key&&(t.preventDefault(),e.clearSearch())})},filterTemplates:function(e){const t=e.toLowerCase().trim();let s=0;this.templateCards.each(function(){const e=$(this),n=e.find(".mase-template-name").text().toLowerCase(),a=e.find(".mase-template-description").text().toLowerCase();""===t||n.includes(t)||a.includes(t)?(e.removeClass("mase-filtered-out").addClass("mase-filtered-in"),s++,setTimeout(function(){e.removeClass("mase-filtered-in")},300)):e.removeClass("mase-filtered-in").addClass("mase-filtered-out")}),this.toggleEmptyState(0===s&&""!==t)},toggleClearButton:function(e){e.length>0?this.clearButton.fadeIn(200):this.clearButton.fadeOut(200)},toggleEmptyState:function(e){e?this.emptyState.fadeIn(300):this.emptyState.fadeOut(300)},clearSearch:function(){this.searchInput.val("").focus(),this.clearButton.fadeOut(200),this.emptyState.fadeOut(300),this.templateCards.each(function(){const e=$(this);e.removeClass("mase-filtered-out").addClass("mase-filtered-in"),setTimeout(function(){e.removeClass("mase-filtered-in")},300)}),console.log("[MASE Template Search] Search cleared")}};$(document).ready(function(){MaseTemplateSearch.init()});