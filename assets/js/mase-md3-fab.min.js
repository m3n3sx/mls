/* mase-md3-fab.js - Minified for production */
!function($){"use strict";var s={$fab:null,$form:null,$saveButton:null,isLoading:!1,isSaving:!1,init:function(){this.$fab=$("#mase-fab-save"),this.$form=$("#mase-settings-form"),this.$saveButton=$("#mase-save-settings"),0!==this.$fab.length?(console.log("[MASE FAB] Initializing FAB"),this.bindEvents(),this.initRipple(),this.initScrollBehavior(),console.log("[MASE FAB] FAB initialized successfully")):console.log("[MASE FAB] FAB element not found")},bindEvents:function(){var s=this;this.$fab.on("click",function(o){o.preventDefault(),s.isSaving?console.log("[MASE FAB] Save already in progress"):(console.log("[MASE FAB] FAB clicked, triggering save"),s.handleSave())}),this.$form.length>0&&this.$form.on("submit",function(o){console.log("[MASE FAB] Form submit detected"),s.showLoading()}),this.$saveButton.length>0&&this.$saveButton.on("click",function(){console.log("[MASE FAB] Save button clicked"),s.showLoading()}),$(document).on("mase:save:start",function(){console.log("[MASE FAB] Save started"),s.showLoading()}),$(document).on("mase:save:success",function(){console.log("[MASE FAB] Save successful"),s.showSuccess()}),$(document).on("mase:save:error",function(){console.log("[MASE FAB] Save error"),s.showError()})},handleSave:function(){console.log("[MASE FAB] Handling save action"),this.showLoading(),this.$form.length>0?(console.log("[MASE FAB] Submitting form"),this.$form.submit()):this.$saveButton.length>0?(console.log("[MASE FAB] Clicking save button"),this.$saveButton.trigger("click")):(console.error("[MASE FAB] No form or save button found"),this.showError())},showLoading:function(){console.log("[MASE FAB] Showing loading state"),this.isSaving=!0,this.$fab.addClass("loading"),this.$fab.prop("disabled",!0),this.$fab.attr("aria-busy","true"),this.$fab.find(".mase-fab-icon").removeClass("dashicons-saved").addClass("dashicons-update")},showSuccess:function(){var s=this;console.log("[MASE FAB] Showing success state"),this.$fab.removeClass("loading error"),this.$fab.addClass("success"),this.$fab.attr("aria-busy","false"),this.$fab.find(".mase-fab-icon").removeClass("dashicons-update dashicons-saved").addClass("dashicons-yes"),setTimeout(function(){s.resetState()},2e3)},showError:function(){var s=this;console.log("[MASE FAB] Showing error state"),this.$fab.removeClass("loading success"),this.$fab.addClass("error"),this.$fab.attr("aria-busy","false"),this.$fab.find(".mase-fab-icon").removeClass("dashicons-update dashicons-saved dashicons-yes").addClass("dashicons-warning"),setTimeout(function(){s.resetState()},3e3)},resetState:function(){console.log("[MASE FAB] Resetting to normal state"),this.isSaving=!1,this.$fab.removeClass("loading success error"),this.$fab.prop("disabled",!1),this.$fab.attr("aria-busy","false"),this.$fab.find(".mase-fab-icon").removeClass("dashicons-update dashicons-yes dashicons-warning").addClass("dashicons-saved")},initRipple:function(){var s=this;this.$fab.on("mousedown touchstart",function(o){if(!s.$fab.prop("disabled")&&!s.$fab.hasClass("loading")){var a=$(this),e=$('<span class="mase-ripple"></span>'),i=this.getBoundingClientRect(),t=(o.pageX||o.originalEvent.touches[0].pageX)-i.left-window.pageXOffset,n=(o.pageY||o.originalEvent.touches[0].pageY)-i.top-window.pageYOffset,l=Math.max(i.width,i.height);e.css({width:l,height:l,left:t-l/2,top:n-l/2}),a.append(e),setTimeout(function(){e.addClass("mase-ripple-active")},10),setTimeout(function(){e.remove()},600)}})},initScrollBehavior:function(){var s=this,o=0,a=!1;$(window).on("scroll",function(){var e=$(this).scrollTop();e<100?a&&(s.$fab.removeClass("hidden"),a=!1):(e>o&&!a?(s.$fab.addClass("hidden"),a=!0):e<o&&a&&(s.$fab.removeClass("hidden"),a=!1),o=e)})}};$(document).ready(function(){s.init()}),window.MASE_FAB=s}(jQuery);