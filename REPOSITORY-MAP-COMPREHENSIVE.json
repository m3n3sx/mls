{
  "plugin_info": {
    "name": "Modern Admin Styler Enterprise (MASE)",
    "version": "1.3.0",
    "description": "Enterprise-grade WordPress admin styling plugin with modern glassmorphism effects",
    "main_file": "modern-admin-styler.php",
    "last_updated": "2025-10-29",
    "status": "GLASSMORPHISM 2024 ENHANCED - Modern multi-layer effects with WCAG AA compliance"
  },

  "recent_changes": {
    "glassmorphism_docblock_update": {
      "file": "includes/class-mase-css-generator.php",
      "date": "2025-10-29",
      "change": "Updated docblock to reference 2024 trends instead of 2025",
      "reason": "Accuracy - current year is 2025, trends are from 2024",
      "lines_modified": "3111-3119",
      "impact": "Documentation only - no functional changes"
    }
  },

  "php_files": {
    "core_classes": [
      {
        "file": "includes/class-mase-admin.php",
        "class": "MASE_Admin",
        "lines": 5483,
        "purpose": "Admin interface, asset enqueuing, AJAX handlers",
        "key_methods": [
          "enqueue_assets($hook) - Conditional asset loading for settings page only",
          "enqueue_global_dark_mode($hook) - Global dark mode assets on all admin pages",
          "render_global_dark_mode_fab() - Floating action button for dark mode toggle",
          "handle_ajax_toggle_dark_mode() - Dark mode toggle AJAX handler",
          "inject_custom_css() - Injects generated CSS into admin head",
          "handle_ajax_save_settings() - Main settings save with full validation",
          "ajax_apply_palette() - Palette application (bypasses full validation)",
          "ajax_apply_template() - Template application (bypasses full validation)"
        ],
        "asset_enqueue_order": [
          "1. wp-color-picker (CSS + JS) - WordPress dependency",
          "2. mase-admin.css [line 247] - Main styles",
          "3. mase-palettes.css [line 255] - Palette gallery",
          "4. mase-templates.css [line 263] - Template gallery",
          "5. mase-accessibility.css [line 271] - Accessibility features",
          "6. mase-responsive.css [line 279] - Responsive design",
          "7. mase-asset-loader.js [line 288] - MUST LOAD FIRST (utilities)",
          "8. mase-admin.js [line 297] - Main script with live preview",
          "9. mase-gradient-builder.js [line 307] - Gradient UI",
          "10. mase-pattern-library.css [line 316] - Pattern styles",
          "11. mase-pattern-library.js [line 323] - Pattern library",
          "12. mase-position-picker.js [line 343] - Position picker",
          "13. mase-compatibility.js [line 354] - Browser detection",
          "14. mase-error-recovery.js [line 365] - Error handling",
          "15. mase-background-accessibility.js [line 381] - A11y features"
        ],
        "inline_scripts": {
          "dark_mode_fouc_prevention": {
            "position": "before mase-admin.js",
            "line": "428",
            "purpose": "Synchronous dark mode detection to prevent FOUC",
            "execution_time": "<50ms",
            "checks": ["localStorage", "user_meta"]
          }
        },
        "localized_data": {
          "maseL10n": {
            "line": "448",
            "contains": ["ajaxUrl", "nonce", "translations", "dark_mode_strings"]
          },
          "maseAdmin": {
            "line": "543",
            "contains": ["palettes", "templates", "gradientPresets", "strings"]
          }
        }
      },
      {
        "file": "includes/class-mase-settings.php",
        "class": "MASE_Settings",
        "lines": 7881,
        "purpose": "Settings storage, retrieval, validation, defaults",
        "option_name": "mase_settings"
      },
      {
        "file": "includes/class-mase-css-generator.php",
        "class": "MASE_CSS_Generator",
        "lines": 8068,
        "purpose": "Generates CSS from settings with mode-specific caching and modern glassmorphism",
        "performance_target": "<100ms generation time",
        "glassmorphism_implementation": {
          "method": "generate_glassmorphism_css()",
          "lines": "3111-3344",
          "features": [
            "Multi-layer backdrop effects (blur + saturate + brightness)",
            "Gradient borders with neon accent colors",
            "Prismatic shadows with color tints",
            "WCAG AA contrast compliance checks",
            "GPU acceleration optimizations",
            "Enhanced hover effects"
          ],
          "sources": [
            "MDN backdrop-filter: https://developer.mozilla.org/en-US/docs/Web/CSS/backdrop-filter",
            "CSS Glass: https://css.glass/",
            "Modern trends: https://www.sliderrevolution.com/resources/css-glassmorphism/"
          ]
        },
        "accessibility_methods": {
          "calculate_contrast_ratio": "WCAG contrast ratio calculation (1-21)",
          "get_relative_luminance": "Relative luminance for contrast (0-1)"
        }
      },
      {
        "file": "includes/class-mase-cache.php",
        "class": "MASE_Cache",
        "purpose": "CSS caching using WordPress transients",
        "cache_keys": [
          "mase_generated_css_light_v1.3.0",
          "mase_generated_css_dark_v1.3.0",
          "mase_login_css",
          "mase_button_css"
        ]
      }
    ],
    "template_files": [
      "includes/admin-settings-page.php - Main admin settings page (5972 lines)",
      "includes/backgrounds-tab-content.php",
      "includes/form-controls-tab-content.php",
      "includes/login-tab-section.php",
      "includes/universal-buttons-tab-content.php",
      "includes/visual-effects-section.php",
      "includes/widgets-tab-content.php",
      "includes/templates/content-tab.php"
    ]
  },

  "js_files": {
    "main_scripts": [
      {
        "file": "assets/js/mase-admin.js",
        "lines": 13776,
        "purpose": "Main admin interface JavaScript with integrated live preview",
        "dependencies": ["jquery", "wp-color-picker", "mase-asset-loader"],
        "key_modules": [
          "MASE_DEBUG - Debug logging module",
          "MASE.livePreview - Live preview functionality (INTEGRATED, not separate file)",
          "MASE.darkMode - Dark mode toggle",
          "MASE.paletteManager - Palette management",
          "MASE.templateManager - Template management",
          "MASE.settings - Settings save/load"
        ],
        "note": "Live preview is NOT a separate file - it's integrated to prevent duplicate event handlers"
      },
      {
        "file": "assets/js/mase-global-dark-mode.js",
        "lines": 200,
        "purpose": "Global dark mode toggle for all admin pages",
        "dependencies": ["jquery"],
        "features": [
          "FAB click handler",
          "Keyboard shortcut: Ctrl+Shift+D",
          "localStorage persistence",
          "AJAX save to server",
          "Smooth mode switching"
        ],
        "localized_data": "maseGlobalDarkMode (ajaxUrl, nonce)",
        "ajax_action": "mase_toggle_dark_mode"
      }
    ],
    "modules": [
      "assets/js/modules/mase-asset-loader.js - MUST load FIRST (provides utilities)",
      "assets/js/modules/mase-gradient-builder.js - Gradient builder UI",
      "assets/js/modules/mase-compatibility.js - Browser feature detection",
      "assets/js/modules/mase-error-recovery.js - Error recovery mechanisms",
      "assets/js/modules/mase-background-accessibility.js - Background accessibility"
    ],
    "non_existent_files": [
      {
        "file": "assets/js/mase-admin-live-preview.js",
        "status": "DOES NOT EXIST",
        "reason": "Live preview is integrated into mase-admin.js to prevent duplicate event handlers"
      }
    ]
  },

  "css_files": {
    "main_stylesheets": [
      {
        "file": "assets/css/mase-admin.css",
        "lines": 1224,
        "purpose": "Main admin interface styles with modern design system",
        "dependencies": ["wp-color-picker"],
        "design_system": {
          "css_variables": "Comprehensive design token system",
          "color_palette": "Primary, semantic, neutral (10-step gray scale)",
          "spacing_scale": "8-point grid system (4px-48px)",
          "typography": "Font sizes, weights, line heights",
          "border_radius": "6-step scale (4px-9999px)",
          "shadows": "Elevation system (xs-xl)",
          "transitions": "Timing and easing functions",
          "z_index": "Layering scale"
        },
        "dark_mode": {
          "implementation": "CSS custom properties with :root[data-theme='dark']",
          "status": "FULLY IMPLEMENTED"
        }
      },
      "assets/css/mase-palettes.css - Palette gallery styles",
      "assets/css/mase-templates.css - Template gallery styles",
      "assets/css/mase-accessibility.css - Accessibility enhancements",
      "assets/css/mase-responsive.css - Responsive design styles",
      "assets/css/mase-pattern-library.css - Pattern library UI styles"
    ]
  },

  "test_files": {
    "e2e_tests": [
      "tests/e2e/comprehensive-functionality-test.spec.js",
      "tests/e2e/quick-smoke-test.spec.js",
      "tests/e2e/visual-redesign-regression.spec.js",
      "tests/e2e/browser-compatibility-test.spec.js",
      "tests/e2e/capture-redesign-screenshots.spec.js"
    ],
    "accessibility_tests": [
      "tests/accessibility/run-all-tests.js - Master test runner",
      "tests/accessibility/contrast-verification.js - WCAG AA contrast testing",
      "tests/accessibility/keyboard-navigation.js - Keyboard accessibility",
      "tests/accessibility/screen-reader-test.js - Screen reader compatibility"
    ],
    "performance_tests": [
      "tests/performance/css-animation-performance.html - Animation FPS testing"
    ],
    "visual_tests": [
      "tests/visual-testing/glassmorphism-2025-test.html - Glassmorphism visual test"
    ]
  },

  "key_directories": {
    "includes": "PHP backend classes and admin functionality",
    "assets/js": "JavaScript files for admin interface",
    "assets/css": "Stylesheets for admin styling",
    "tests": "Testing suites (e2e, visual, accessibility, performance)",
    "docs": "Documentation and guides",
    ".kiro/specs": "Feature specifications and implementation plans"
  },

  "live_preview_architecture": {
    "integration": "Integrated into mase-admin.js as MASE.livePreview module",
    "not_separate_file": true,
    "primary_file": "assets/js/mase-admin.js",
    "module_name": "MASE.livePreview",
    "purpose": "Prevent duplicate event handlers and race conditions"
  },

  "asset_enqueue_mechanism": {
    "settings_page_only": {
      "hook": "admin_enqueue_scripts",
      "condition": "toplevel_page_mase-settings",
      "method": "enqueue_assets($hook)",
      "file": "includes/class-mase-admin.php",
      "line": "237",
      "load_order": "See php_files.core_classes[0].asset_enqueue_order"
    },
    "all_admin_pages": {
      "hook": "admin_enqueue_scripts",
      "method": "enqueue_global_dark_mode($hook)",
      "file": "includes/class-mase-admin.php",
      "line": "156",
      "loads": [
        "mase-global-dark-mode.css [line 157] - Reuses mase-admin.css",
        "mase-global-dark-mode.js [line 165]"
      ]
    }
  },

  "dark_mode_architecture": {
    "status": "FULLY IMPLEMENTED",
    "components": {
      "css": {
        "file": "assets/css/mase-admin.css",
        "status": "Modern design system with CSS variables",
        "dark_mode_selector": ":root[data-theme='dark']"
      },
      "global_toggle": {
        "file": "assets/js/mase-global-dark-mode.js",
        "status": "FULLY IMPLEMENTED",
        "features": [
          "FAB in bottom-right corner",
          "Keyboard shortcut: Ctrl+Shift+D",
          "localStorage persistence",
          "User meta synchronization"
        ]
      },
      "fouc_prevention": {
        "file": "includes/class-mase-admin.php",
        "type": "inline_script",
        "position": "before mase-admin.js",
        "execution": "synchronous",
        "checks": ["localStorage (primary)", "user_meta (fallback)"]
      }
    }
  },

  "glassmorphism_system": {
    "status": "ENHANCED WITH 2024 TRENDS",
    "implementation": {
      "file": "includes/class-mase-css-generator.php",
      "method": "generate_glassmorphism_css()",
      "lines": "3111-3344"
    },
    "features": {
      "multi_layer_effects": {
        "blur": "Configurable 0-50px (default 20px)",
        "saturate": "180% for vibrant colors",
        "brightness": "110% for enhanced luminosity"
      },
      "gradient_borders": {
        "colors": ["--neon-cyan: #00f5ff", "--neon-magenta: #ff0080"],
        "implementation": "border-image: linear-gradient()"
      },
      "prismatic_shadows": {
        "layers": "Dual-layer shadows with color tints"
      },
      "accessibility": {
        "wcag_compliance": "WCAG 2.1 Level AA (4.5:1 minimum)",
        "contrast_check": "Automatic contrast ratio calculation"
      }
    },
    "sources": [
      "MDN backdrop-filter documentation",
      "CSS Glass generator tool",
      "Slider Revolution glassmorphism guide"
    ]
  },

  "visual_redesign_status": {
    "version": "2.0.0",
    "status": "COMPLETED",
    "completion_date": "2025-10-29",
    "key_features": [
      "Modern design token system with CSS custom properties",
      "Enhanced glassmorphism with 2024 trends",
      "Full dark mode support",
      "WCAG 2.1 Level AA accessibility compliance",
      "Responsive design for all screen sizes",
      "Optimized performance (28KB minified CSS)"
    ]
  },

  "security_implementation": {
    "nonce_verification": "All AJAX handlers use check_ajax_referer()",
    "capability_checks": "All AJAX handlers verify current_user_can('manage_options')",
    "input_sanitization": "sanitize_text_field(), sanitize_hex_color(), absint()",
    "output_escaping": "esc_html(), esc_attr(), esc_url()"
  },

  "documentation_files": {
    "visual_redesign": [
      "docs/VISUAL-REDESIGN-CHANGELOG.md",
      "docs/VISUAL-REDESIGN-DEPLOYMENT-SUMMARY.md",
      "docs/VISUAL-REDESIGN-FINAL-REVIEW.md",
      ".kiro/specs/visual-redesign-settings-page/"
    ],
    "accessibility": [
      "docs/ACCESSIBILITY-VERIFICATION-GUIDE.md",
      "tests/accessibility/README.md",
      "tests/accessibility/QUICK-REFERENCE.md"
    ],
    "glassmorphism": [
      "docs/GLASSMORPHISM-QUICK-START.md",
      "docs/GLASSMORPHISM-2025-UPGRADE.md"
    ]
  }
}
