{
  "plugin_info": {
    "name": "Modern Admin Styler Enterprise (MASE)",
    "version": "1.2.1",
    "description": "WordPress admin styling plugin with comprehensive customization",
    "main_file": "modern-admin-styler.php",
    "last_updated": "2025-10-29"
  },
  "php_files": [
    "includes/class-mase-admin.php",
    "includes/class-mase-settings.php",
    "includes/class-mase-css-generator.php",
    "includes/class-mase-cache.php",
    "includes/class-mase-cachemanager.php",
    "includes/class-mase-migration.php",
    "includes/class-mase-mobile-optimizer.php",
    "includes/class-mase-rest-api.php",
    "includes/class-mase-background-migration.php",
    "includes/admin-settings-page.php",
    "includes/backgrounds-tab-content.php",
    "includes/form-controls-tab-content.php",
    "includes/login-tab-section.php",
    "includes/universal-buttons-tab-content.php",
    "includes/visual-effects-section.php",
    "includes/widgets-tab-content.php",
    "includes/templates/content-tab.php"
  ],
  "js_files": [
    "assets/js/mase-admin.js",
    "assets/js/mase-accessibility.js",
    "assets/js/mase-pattern-library.js",
    "assets/js/mase-position-picker.js",
    "assets/js/modules/mase-asset-loader.js",
    "assets/js/modules/mase-gradient-builder.js",
    "assets/js/modules/mase-compatibility.js",
    "assets/js/modules/mase-error-recovery.js",
    "assets/js/modules/mase-background-accessibility.js",
    "assets/js/modules/event-bus.js",
    "assets/js/modules/state-manager.js",
    "assets/js/modules/palette-manager.js",
    "assets/js/modules/template-manager.js",
    "assets/js/modules/preview-engine.js",
    "assets/js/modules/animations.js",
    "assets/js/modules/animation-timeline.js",
    "assets/js/modules/animation-presets.js",
    "assets/js/modules/color-system.js",
    "assets/js/modules/typography.js",
    "assets/js/modules/api-client.js",
    "assets/js/modules/ai-suggestions.js",
    "assets/js/modules/event-adapter.js",
    "assets/js/modules/main-admin.js",
    "assets/js/modules/index.js"
  ],
  "css_files": [
    "assets/css/mase-admin.css",
    "assets/css/mase-accessibility.css",
    "assets/css/mase-palettes.css",
    "assets/css/mase-responsive.css",
    "assets/css/mase-templates.css",
    "assets/css/mase-pattern-library.css",
    "assets/css/mase-animation-editor.css"
  ],
  "test_files": [
    "tests/e2e/comprehensive-functionality-test.spec.js",
    "tests/e2e/quick-smoke-test.spec.js",
    "tests/e2e/global-setup.js",
    "tests/e2e/helpers/auth.js",
    "tests/visual-interactive/**/*",
    "tests/cypress/e2e/mase-basic.cy.js",
    "tests/cypress/support/commands.js",
    "tests/cypress/support/e2e.js",
    "tests/browser-console-test.js",
    "tests/simple-browser-tests.js",
    "tests/curl-api-test.sh",
    "tests/benchmarks/css-generation.php"
  ],
  "key_directories": {
    "includes": "PHP backend classes and admin functionality - One class per file pattern (class-mase-*.php)",
    "assets/js": "JavaScript files for admin interface - Main scripts + modules subdirectory",
    "assets/css": "Stylesheets for admin styling - BEM with mase- prefix",
    "tests": "Testing suites including e2e (Playwright), visual-interactive, cypress, and benchmarks",
    "docs": "Documentation and guides - User guides, developer guides, architecture, task summaries",
    "languages": "Localization files - POT template, PO/MO translations"
  },
  "live_preview_related": {
    "note": "Live preview functionality is integrated into mase-admin.js as MASE.livePreview module",
    "primary_js": "assets/js/mase-admin.js",
    "php_enqueue": "includes/class-mase-admin.php",
    "enqueue_method": "enqueue_assets()",
    "dependencies": ["jquery", "wp-color-picker", "mase-asset-loader"],
    "localized_data": ["maseAdmin", "maseL10n"],
    "inline_scripts": ["Dark mode FOUC prevention", "Dashicons pointer-events fix"]
  },
  "asset_enqueue_mechanism": {
    "file": "includes/class-mase-admin.php",
    "method": "enqueue_assets($hook)",
    "hook": "admin_enqueue_scripts",
    "conditional_loading": "Only on 'toplevel_page_mase-settings' hook",
    "load_order": [
      "1. wp-color-picker (WordPress core)",
      "2. mase-admin.css (main styles)",
      "3. mase-palettes.css",
      "4. mase-templates.css",
      "5. mase-accessibility.css",
      "6. mase-responsive.css",
      "7. mase-asset-loader.js (MUST load first - provides utilities)",
      "8. mase-admin.js (main script with live preview)",
      "9. mase-gradient-builder.js (on-demand)",
      "10. mase-pattern-library.js + CSS",
      "11. mase-position-picker.js",
      "12. mase-compatibility.js (early for feature detection)",
      "13. mase-error-recovery.js (early for error handlers)",
      "14. mase-background-accessibility.js"
    ],
    "inline_scripts": {
      "dark_mode_fouc_prevention": {
        "position": "before mase-admin.js",
        "purpose": "Prevent Flash of Unstyled Content by checking localStorage synchronously",
        "execution_time": "<50ms",
        "requirements": ["12.1", "12.2", "12.3", "12.4"]
      },
      "dashicons_pointer_fix": {
        "type": "inline CSS",
        "purpose": "Fix dashicons blocking toggle clicks with pointer-events: none",
        "critical": true,
        "requirements": ["1.1-1.5", "4.1-4.5"]
      }
    },
    "localized_data": {
      "maseAdmin": {
        "ajaxUrl": "admin-ajax.php URL",
        "nonce": "mase_save_settings nonce",
        "debug": "WP_DEBUG status",
        "palettes": "Palette data",
        "templates": "Template data",
        "gradientPresets": "Gradient presets",
        "strings": "UI strings (translatable)"
      },
      "maseL10n": {
        "dark_mode_strings": "Dark mode FAB tooltips and announcements",
        "error_messages": "Error messages for all operations",
        "ui_messages": "General UI feedback messages"
      },
      "masePatternLibrary": {
        "patterns": "Pattern library data (also loaded via AJAX on-demand)"
      }
    }
  },
  "ajax_handlers": {
    "core_settings": [
      "mase_save_settings - Main settings save",
      "mase_export_settings - Export configuration",
      "mase_import_settings - Import configuration",
      "mase_reset_settings - Reset to defaults"
    ],
    "palettes": [
      "mase_apply_palette - Apply color palette",
      "mase_save_custom_palette - Save custom palette",
      "mase_delete_custom_palette - Delete custom palette"
    ],
    "templates": [
      "mase_apply_template - Apply template",
      "mase_save_custom_template - Save custom template",
      "mase_delete_custom_template - Delete custom template"
    ],
    "backups": [
      "mase_create_backup - Create settings backup",
      "mase_restore_backup - Restore from backup",
      "mase_get_backups - List available backups"
    ],
    "uploads": [
      "mase_upload_menu_logo - Upload menu logo",
      "mase_upload_login_logo - Upload login logo",
      "mase_upload_login_background - Upload login background",
      "mase_upload_background_image - Upload background image",
      "mase_select_background_image - Select from media library",
      "mase_remove_background_image - Remove background image"
    ],
    "dark_mode": [
      "mase_toggle_dark_mode - Toggle dark/light mode"
    ],
    "buttons": [
      "mase_get_button_defaults - Get default button settings",
      "mase_reset_button_type - Reset specific button type",
      "mase_reset_all_buttons - Reset all button settings"
    ],
    "patterns": [
      "mase_get_pattern_library - Load pattern library data"
    ],
    "error_logging": [
      "mase_log_client_error - Log client-side errors"
    ]
  },
  "security_implementation": {
    "nonce_verification": "All AJAX handlers use check_ajax_referer('mase_save_settings', 'nonce')",
    "capability_checks": "All AJAX handlers verify current_user_can('manage_options')",
    "input_sanitization": "sanitize_text_field(), sanitize_hex_color(), absint()",
    "output_escaping": "esc_html(), esc_attr(), esc_url()",
    "file_uploads": "Type validation, size limits, MIME verification, SVG sanitization",
    "requirements": ["22.1", "22.2", "22.3"]
  },
  "recent_changes": {
    "content_spacing_fix": {
      "file": "includes/class-mase-settings.php",
      "line": 482,
      "change": "Changed content left margin from 20px to 0px",
      "reason": "WordPress already has proper margin from menu",
      "date": "2025-10-29"
    },
    "menu_background_fix": {
      "file": "includes/class-mase-css-generator.php",
      "methods": ["generate_admin_menu_css()", "generate_glassmorphism_css()"],
      "change": "Apply background only to #adminmenuback, not all three layers",
      "reason": "Prevent color stacking (3 layers = 3x darker)",
      "requirements": ["6.1", "6.2", "6.4", "6.5", "12.1", "12.2", "12.3"]
    }
  },
  "architecture_patterns": {
    "php": {
      "pattern": "WordPress plugin architecture",
      "conventions": [
        "One class per file",
        "WordPress hooks/filters exclusively",
        "Security: nonce verification, capability checks, input sanitization",
        "Settings stored in wp_options table"
      ]
    },
    "javascript": {
      "pattern": "Module pattern with jQuery",
      "conventions": [
        "Namespace: MASE global object",
        "jQuery(document).ready() wrappers",
        "Event-driven architecture",
        "Localized data via wp_localize_script()"
      ]
    },
    "css": {
      "pattern": "BEM methodology",
      "conventions": [
        "Prefix: mase-",
        "CSS custom properties for theming",
        "Mobile-first responsive design"
      ]
    }
  },
  "performance_optimizations": {
    "caching": {
      "strategy": "Mode-specific CSS caching",
      "cache_keys": ["Light mode", "Dark mode", "Login", "Buttons"],
      "invalidation": "On settings save or mode toggle"
    },
    "lazy_loading": {
      "assets": "Conditional loading based on active tab",
      "modules": "On-demand module loading via asset loader"
    },
    "css_generation": {
      "target": "<100ms generation time",
      "method": "String concatenation (faster than array joins)"
    }
  },
  "accessibility_compliance": {
    "standard": "WCAG 2.1 AA",
    "features": [
      "Keyboard navigation",
      "Focus indicators",
      "ARIA labels and attributes",
      "Screen reader announcements",
      "Color contrast compliance"
    ],
    "requirements": ["9.1", "9.2", "9.3", "9.4", "9.5", "13.1-13.5"]
  }
}
