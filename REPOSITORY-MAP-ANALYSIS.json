{
  "repository_structure": {
    "php_backend": {
      "core_classes": [
        "includes/class-mase-admin.php",
        "includes/class-mase-settings.php",
        "includes/class-mase-css-generator.php",
        "includes/class-mase-cache.php",
        "includes/class-mase-cachemanager.php",
        "includes/class-mase-template-manager.php",
        "includes/class-mase-rest-api.php",
        "includes/class-mase-migration.php",
        "includes/class-mase-background-migration.php",
        "includes/class-mase-mobile-optimizer.php"
      ],
      "admin_templates": [
        "includes/admin-settings-page.php",
        "includes/backgrounds-tab-content.php",
        "includes/form-controls-tab-content.php",
        "includes/login-tab-section.php",
        "includes/universal-buttons-tab-content.php",
        "includes/visual-effects-section.php",
        "includes/widgets-tab-content.php",
        "includes/templates/content-tab.php"
      ]
    },
    "javascript_frontend": {
      "main_scripts": [
        "assets/js/mase-admin.js",
        "assets/js/mase-global-dark-mode.js",
        "assets/js/mase-accessibility.js",
        "assets/js/mase-template-picker.js",
        "assets/js/mase-pattern-library.js",
        "assets/js/mase-position-picker.js"
      ],
      "modules": [
        "assets/js/modules/mase-asset-loader.js",
        "assets/js/modules/mase-gradient-builder.js",
        "assets/js/modules/mase-background-accessibility.js",
        "assets/js/modules/mase-compatibility.js",
        "assets/js/modules/mase-error-recovery.js",
        "assets/js/modules/state-manager.js",
        "assets/js/modules/preview-engine.js",
        "assets/js/modules/palette-manager.js",
        "assets/js/modules/template-manager.js",
        "assets/js/modules/color-system.js",
        "assets/js/modules/typography.js",
        "assets/js/modules/event-bus.js"
      ]
    }
  }
}
,
  "css_stylesheets": {
    "core_styles": [
      "assets/css/mase-admin.css",
      "assets/css/mase-accessibility.css",
      "assets/css/mase-palettes.css",
      "assets/css/mase-responsive.css",
      "assets/css/mase-templates.css",
      "assets/css/mase-template-picker.css",
      "assets/css/mase-pattern-library.css",
      "assets/css/mase-animation-editor.css"
    ],
    "theme_templates": [
      "assets/css/themes/floral-theme.css",
      "assets/css/themes/gaming-theme.css",
      "assets/css/themes/glass-theme.css",
      "assets/css/themes/gradient-theme.css",
      "assets/css/themes/minimal-theme.css",
      "assets/css/themes/professional-theme.css",
      "assets/css/themes/retro-theme.css",
      "assets/css/themes/terminal-theme.css"
    ]
  },
  "asset_enqueue_mechanism": {
    "location": "includes/class-mase-admin.php",
    "method": "enqueue_assets()",
    "hook": "admin_enqueue_scripts",
    "conditional_loading": "Only on 'toplevel_page_mase-settings' hook",
    "load_order": [
      "1. wp-color-picker (WordPress core)",
      "2. mase-asset-loader.js (utilities first)",
      "3. mase-admin.css (main styles)",
      "4. mase-admin.js (main functionality)",
      "5. mase-template-picker.js",
      "6. Inline script for template initialization",
      "7. mase-gradient-builder.js",
      "8. mase-pattern-library.js + CSS",
      "9. mase-position-picker.js",
      "10. mase-compatibility.js",
      "11. mase-error-recovery.js",
      "12. mase-background-accessibility.js"
    ]
  }
}
,
  "ajax_handlers": {
    "settings": [
      "mase_save_settings",
      "mase_export_settings",
      "mase_import_settings",
      "mase_reset_settings"
    ],
    "palettes": [
      "mase_apply_palette",
      "mase_save_custom_palette",
      "mase_delete_custom_palette"
    ],
    "templates": [
      "mase_apply_template",
      "mase_save_custom_template",
      "mase_delete_custom_template",
      "mase_apply_theme_template",
      "mase_get_templates"
    ],
    "backups": [
      "mase_create_backup",
      "mase_restore_backup",
      "mase_get_backups"
    ],
    "uploads": [
      "mase_upload_menu_logo",
      "mase_upload_login_logo",
      "mase_upload_login_background",
      "mase_upload_background_image",
      "mase_select_background_image",
      "mase_remove_background_image"
    ],
    "features": [
      "mase_toggle_dark_mode",
      "mase_get_pattern_library",
      "mase_log_client_error",
      "mase_get_button_defaults",
      "mase_reset_button_type",
      "mase_reset_all_buttons"
    ]
  }
}
,
  "live_preview_analysis": {
    "status": "Handled by MASE.livePreview module in mase-admin.js",
    "location": "assets/js/mase-admin.js",
    "note": "All live preview functionality consolidated in main JS file to prevent duplicate event handlers and race conditions",
    "php_comment_location": "includes/class-mase-admin.php:631-637",
    "no_separate_file": true,
    "integration": "Integrated into main admin script, not a separate enqueued file"
  },
  "recent_changes": {
    "template_picker_inline_script": {
      "file": "includes/class-mase-admin.php",
      "lines": "344-423",
      "purpose": "Initialize template picker grid dynamically",
      "loads_data_from": "window.maseAdmin.themeTemplates",
      "triggers_on": [
        "Document ready",
        "Templates tab click"
      ]
    }
  },
  "key_findings": {
    "no_separate_live_preview_file": "Live preview is NOT a separate enqueued file - it's a module within mase-admin.js",
    "conditional_loading": "Assets only load on MASE settings page (toplevel_page_mase-settings)",
    "dependency_chain": "mase-asset-loader → mase-admin → other modules",
    "inline_scripts": [
      "Dark mode FOUC prevention (before mase-admin)",
      "Template picker initialization (after mase-admin)"
    ]
  }
}
