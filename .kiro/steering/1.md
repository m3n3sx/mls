---
inclusion: always
---
---
inclusion: always
---

# WordPress Plugin Standards

Modern Admin Styler (MASE) is a WordPress admin styling plugin. All code must follow WordPress conventions and security best practices.

## Security Requirements

**PHP:**
- Sanitize ALL inputs: `sanitize_text_field()`, `sanitize_key()`, `absint()`
- Escape ALL outputs: `esc_html()`, `esc_attr()`, `esc_url()`
- AJAX: Always verify nonces with `check_ajax_referer()` and check `current_user_can('manage_options')`

**JavaScript:**
- Pass nonces via `wp_localize_script()` only
- Never hardcode AJAX URLs - use `ajaxurl` from localized data

## Code Conventions

**PHP:**
- One class per file: `includes/class-mase-*.php`
- Use WordPress hooks/filters exclusively - no direct function calls
- Follow WordPress Coding Standards

**JavaScript:**
- Enqueue with `wp_enqueue_script()`, dependencies: `['jquery']`
- Wrap initialization in `jQuery(document).ready()`
- Use jQuery for DOM manipulation (WordPress standard)

**CSS:**
- Enqueue with `wp_enqueue_style()`
- BEM naming: `.mase-component__element--modifier`
- Prefix ALL classes with `mase-`
- Use CSS custom properties for theming

## Architecture

**File Structure:**
- `includes/class-mase-admin.php` - Asset enqueuing, AJAX handlers
- `includes/class-mase-settings.php` - Settings CRUD operations
- `includes/class-mase-css-generator.php` - Dynamic CSS generation
- `includes/class-mase-cache.php` - Performance caching layer
- `includes/admin-settings-page.php` - Admin page HTML template
- `assets/js/mase-*.js` - JavaScript modules
- `assets/css/mase-*.css` - Stylesheets

## Investigation Protocol

**Before making ANY changes:**
1. Read complete files - never work from snippets
2. Search for existing implementations: `grep -r "pattern" includes/ assets/`
3. Cite evidence with `[filename.php:line]` and code snippets
4. Verify syntax before suggesting changes

**Never use vague language:**
- Forbidden: "probably", "might be", "could be", "I think", "maybe"
- Required: Concrete evidence from code, tests, or logs