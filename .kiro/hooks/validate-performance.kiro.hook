{
  "name": "validate-performance",
  "description": "Validates performance best practices for MASE plugin",
  "version": "1.0.0",
  "trigger": "onFileSave",
  "filePattern": "**/*.{php,js}",
  "excludePattern": "**/vendor/**,**/node_modules/**,**/tests/**",
  "enabled": true,
  "prompt": "You are performing performance validation for MASE v1.2.0.\n\n**FILE:** {{filePath}}\n\n**PERFORMANCE CHECKLIST:**\n\n**Database Queries:**\n- [ ] No queries in loops (N+1 problem)\n- [ ] Proper use of caching\n- [ ] Batch operations where possible\n- [ ] Efficient query structure\n\n**Caching:**\n- [ ] Expensive operations cached\n- [ ] Cache invalidation strategy\n- [ ] Proper cache keys\n- [ ] TTL set appropriately\n\n**Asset Loading:**\n- [ ] Conditional loading (only where needed)\n- [ ] Proper dependencies declared\n- [ ] No unnecessary global loading\n\n**Memory Usage:**\n- [ ] No large arrays in memory\n- [ ] Proper cleanup of variables\n- [ ] Efficient data structures\n\n**Code Efficiency:**\n- [ ] No redundant operations\n- [ ] Efficient algorithms\n- [ ] Lazy loading where appropriate\n\n**YOUR TASK:**\n1. Scan for performance issues\n2. Identify N+1 query problems\n3. Check caching implementation\n4. Verify efficient code patterns\n5. Estimate performance impact\n\n**OUTPUT FORMAT:**\n```\n✅ PASS / ⚠️ WARNING / ❌ FAIL: Performance Validation\n\nFile: {{fileName}}\n\n[DATABASE QUERIES]\n✅/❌ No N+1 problems: [status]\n✅/❌ Caching implemented: [status]\n\n[ISSUES FOUND]\n1. Line XX-YY: N+1 Query Problem\n   Current: Loop with {{count}} queries\n   Impact: {{time}}ms per iteration\n   Fix: [Provide specific fix with code]\n   Estimated improvement: {{improvement}}\n\n2. Line ZZ: Missing cache\n   Operation: {{operation}}\n   Cost: {{cost}}ms\n   Fix: [Provide caching implementation]\n\n[PERFORMANCE IMPACT]\nEstimated current: {{current_time}}ms\nEstimated after fixes: {{improved_time}}ms\nImprovement: {{percentage}}%\n\n[REQUIRED FIXES]\n[List critical performance fixes]\n\n[OPTIMIZATIONS]\n[List optional improvements]\n```\n\nProvide specific code examples for fixes."
}
