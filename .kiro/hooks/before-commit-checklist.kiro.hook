{
  "name": "before-commit-checklist",
  "description": "Comprehensive pre-commit checklist for MASE development",
  "version": "1.0.0",
  "trigger": "manual",
  "enabled": true,
  "prompt": "You are performing a pre-commit checklist for MASE v1.2.0.\n\n**MODIFIED FILES:** {{modifiedFiles}}\n\n**COMPREHENSIVE CHECKLIST:**\n\n**CODE QUALITY:**\n- [ ] All files <500 lines\n- [ ] All methods <50 lines\n- [ ] Nesting depth <4 levels\n- [ ] No magic numbers\n- [ ] No duplicated code\n- [ ] Follows naming conventions\n\n**SECURITY:**\n- [ ] Nonce verification on AJAX\n- [ ] Capability checks present\n- [ ] Input sanitized\n- [ ] Output escaped\n- [ ] No SQL injection risks\n\n**PERFORMANCE:**\n- [ ] Caching implemented\n- [ ] No N+1 queries\n- [ ] Assets conditionally loaded\n- [ ] Efficient algorithms\n\n**TESTING:**\n- [ ] Tests written\n- [ ] Tests passing\n- [ ] Coverage ‚â•70%\n\n**DOCUMENTATION:**\n- [ ] Class docblocks\n- [ ] Method docblocks\n- [ ] Inline comments for complex logic\n- [ ] CHANGELOG.md updated\n\n**WORDPRESS:**\n- [ ] No deprecated functions\n- [ ] Translatable strings\n- [ ] ABSPATH check in files\n- [ ] Follows WordPress coding standards\n\n**YOUR TASK:**\n1. Review each modified file\n2. Check all items in checklist\n3. Report any violations\n4. Provide fix suggestions\n5. Give final PASS/FAIL verdict\n\n**OUTPUT FORMAT:**\n```\nüîç PRE-COMMIT CHECKLIST - MASE v1.2.0\n\nFiles to commit: {{fileCount}}\n\n[CODE QUALITY] ‚úÖ/‚ùå\n‚úÖ File sizes: All under 500 lines\n‚úÖ Method lengths: All under 50 lines\n‚ùå Magic numbers: Found 3 instances\n   - Line 45: if (blur > 50) // Use constant\n   - Line 78: padding: 20px // Use CSS variable\n   - Line 102: timeout = 300 // Use config constant\n\n[SECURITY] ‚úÖ/‚ùå\n‚úÖ Nonce verification: Present\n‚ùå Missing capability check in ajax_delete_palette()\n   Fix: Add current_user_can('manage_options')\n\n[PERFORMANCE] ‚úÖ/‚ùå\n‚úÖ Caching: Implemented\n‚ö†Ô∏è Potential N+1 in get_all_palettes()\n   Review: Lines 156-160\n\n[TESTING] ‚úÖ/‚ùå\n‚úÖ Tests exist\n‚ùå Coverage: 68% (target: 70%)\n   Missing: test_validate_palette_colors()\n\n[DOCUMENTATION] ‚úÖ/‚ùå\n‚úÖ Docblocks: Present\n‚ùå CHANGELOG.md: Not updated\n   Add: Entry for new palette validation\n\n[WORDPRESS] ‚úÖ/‚ùå\n‚úÖ No deprecated functions\n‚úÖ Strings translatable\n‚úÖ ABSPATH checks present\n\n[SUMMARY]\nTotal checks: 24\nPassed: 18 ‚úÖ\nFailed: 6 ‚ùå\nWarnings: 1 ‚ö†Ô∏è\n\n[BLOCKING ISSUES]\n1. Missing capability check (SECURITY)\n2. Test coverage below threshold (TESTING)\n3. CHANGELOG.md not updated (DOCUMENTATION)\n\n[VERDICT]\n‚ùå COMMIT BLOCKED\n\nRequired fixes before commit:\n1. Add capability check to ajax_delete_palette()\n2. Add test_validate_palette_colors() test\n3. Update CHANGELOG.md\n\nEstimated fix time: 15 minutes\n\n[OPTIONAL IMPROVEMENTS]\n- Replace magic numbers with constants\n- Review potential N+1 query\n```\n\nBe thorough and specific. Block commit if critical issues found."
}
