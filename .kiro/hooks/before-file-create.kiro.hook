{
  "name": "before-file-create",
  "description": "Validates before creating new file - checks file count and naming",
  "version": "1.0.0",
  "trigger": "beforeFileCreate",
  "filePattern": "includes/**/*.php",
  "enabled": true,
  "prompt": "You are validating a new file creation for MASE v1.2.0.\n\n**NEW FILE:** {{filePath}}\n**FILE NAME:** {{fileName}}\n\n**HARD LIMITS:**\n- MAX_FILE_COUNT: 20 files in includes/ directory\n- File naming: class-mase-{name}.php (kebab-case)\n\n**YOUR TASK:**\n1. Count current PHP files in includes/\n2. Check if adding this file exceeds limit (20)\n3. Verify file naming convention\n4. Check if file already exists\n5. Check if similar file exists (avoid duplication)\n6. Validate file location\n\n**OUTPUT FORMAT:**\n```\nüîç PRE-CREATE VALIDATION: {{fileName}}\n\n[FILE COUNT CHECK]\nCurrent files: {{current}}/20\nAfter creation: {{after}}/20\nStatus: ‚úÖ SAFE / ‚ö†Ô∏è WARNING / ‚ùå LIMIT REACHED\n\n{{#if at_limit}}\n‚ùå CANNOT CREATE FILE\nReason: File count at maximum (20/20)\n\nOptions:\n1. Merge existing files\n2. Refactor to reduce file count\n3. Split into extension architecture\n{{/if}}\n\n{{#if approaching_limit}}\n‚ö†Ô∏è WARNING: Approaching limit ({{current}}/20)\nRemaining slots: {{remaining}}\nPlan refactoring soon\n{{/if}}\n\n[NAMING CONVENTION]\n‚úÖ/‚ùå File name: {{fileName}}\nExpected pattern: class-mase-{name}.php\n{{#if naming_violation}}\nCurrent: {{fileName}}\nExpected: {{expectedName}}\nFix: Rename to follow convention\n{{/if}}\n\n[DUPLICATE CHECK]\n‚úÖ/‚ùå File doesn't exist\n{{#if exists}}\n‚ùå File already exists: {{filePath}}\nAction: Choose different name or update existing file\n{{/if}}\n\n[SIMILAR FILES]\n{{#if similar_files}}\n‚ö†Ô∏è Similar files found:\n{{#each similar_files}}\n- {{this.name}} ({{this.path}})\n  Similarity: {{this.similarity}}%\n  Consider: Can functionality be merged?\n{{/each}}\n{{/if}}\n\n[LOCATION VALIDATION]\n‚úÖ/‚ùå Location: {{directory}}\nExpected locations:\n- includes/core/ - Core functionality\n- includes/features/ - Feature modules\n- includes/generators/ - CSS/JS generators\n- includes/services/ - Business logic\n- includes/utilities/ - Helper functions\n\n{{#if wrong_location}}\n‚ö†Ô∏è Consider moving to: {{suggested_location}}\nReason: {{reason}}\n{{/if}}\n\n[VERDICT]\n‚úÖ APPROVED / ‚ö†Ô∏è APPROVED WITH WARNINGS / ‚ùå BLOCKED\n\n{{#if blocked}}\nBlocking issues:\n1. {{issue1}}\n2. {{issue2}}\n\nRequired actions before creating file:\n- {{action1}}\n- {{action2}}\n{{/if}}\n\n{{#if approved}}\n‚úÖ Safe to create file\n\nNext steps:\n1. Create file with proper docblock\n2. Follow class naming: MASE_{{ClassName}}\n3. Implement required methods\n4. Add security checks\n5. Create test file: tests/unit/test-{{class-name}}.php\n{{/if}}\n```\n\nBe specific and provide actionable guidance."
}
