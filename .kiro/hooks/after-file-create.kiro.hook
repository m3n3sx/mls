{
  "name": "after-file-create",
  "description": "Validates after file creation - ensures completeness",
  "version": "1.0.0",
  "trigger": "afterFileCreate",
  "filePattern": "includes/**/*.php",
  "enabled": true,
  "prompt": "You are validating a newly created file for MASE v1.2.0.\n\n**FILE:** {{filePath}}\n**FILE NAME:** {{fileName}}\n\n**COMPLETENESS CHECKLIST:**\n\n**YOUR TASK:**\nVerify the new file has all required elements for production readiness.\n\n**OUTPUT FORMAT:**\n```\n✅ POST-CREATE VALIDATION: {{fileName}}\n\n[FILE STRUCTURE]\n✅/❌ ABSPATH check present\n✅/❌ File docblock present\n✅/❌ Class defined\n✅/❌ Class follows naming convention\n\n{{#if missing_abspath}}\n❌ Missing ABSPATH check\nAdd at top of file:\n```php\nif (!defined('ABSPATH')) {\n    exit; // Exit if accessed directly\n}\n```\n{{/if}}\n\n[FILE DOCBLOCK]\n✅/❌ Complete docblock\n\nRequired elements:\n- [ ] File description\n- [ ] @package ModernAdminStyler\n- [ ] @since version\n- [ ] @author (optional)\n\n{{#if incomplete_docblock}}\nTemplate:\n```php\n/**\n * {{Description}}\n * \n * @package ModernAdminStyler\n * @since 1.2.0\n */\n```\n{{/if}}\n\n[CLASS VALIDATION]\nClass name: {{className}}\n✅/❌ Follows convention: MASE_PascalCase\n✅/❌ Class docblock present\n✅/❌ Constructor defined (if needed)\n\n{{#if naming_violation}}\n❌ Class name violation\nCurrent: {{className}}\nExpected: MASE_{{ExpectedName}}\n{{/if}}\n\n[CLASS DOCBLOCK]\n✅/❌ Complete class docblock\n\nRequired:\n```php\n/**\n * {{ClassName}} - Brief description\n * \n * Detailed description of class purpose and functionality.\n * \n * @package ModernAdminStyler\n * @since 1.2.0\n */\nclass {{ClassName}} {\n```\n\n[REQUIRED METHODS]\n{{#if is_feature_class}}\nFeature class should have:\n✅/❌ __construct() - Initialize\n✅/❌ init() - Setup hooks\n✅/❌ Main functionality methods\n{{/if}}\n\n{{#if is_service_class}}\nService class should have:\n✅/❌ Core business logic methods\n✅/❌ Validation methods\n✅/❌ Error handling\n{{/if}}\n\n[SECURITY CHECKS]\n{{#if has_ajax}}\n✅/❌ Nonce verification\n✅/❌ Capability checks\n✅/❌ Input sanitization\n{{/if}}\n\n{{#if has_database}}\n✅/❌ Using $wpdb->prepare()\n✅/❌ No direct SQL queries\n{{/if}}\n\n[AUTOLOADER COMPATIBILITY]\n✅/❌ File name matches class name\n✅/❌ Located in correct directory\n✅/❌ Will be found by autoloader\n\nFile: {{fileName}}\nClass: {{className}}\nExpected file: class-{{kebab-case-class-name}}.php\n\n[TEST FILE]\n✅/❌ Test file created\n\nExpected location: tests/unit/test-{{class-name}}.php\n\n{{#if no_test_file}}\n⚠️ Test file missing\n\nCreate: tests/unit/test-{{class-name}}.php\n\nTemplate:\n```php\n<?php\n/**\n * Test {{ClassName}}\n */\nclass Test_{{ClassName}} extends WP_UnitTestCase {\n    \n    public function setUp() {\n        parent::setUp();\n        $this->instance = new {{ClassName}}();\n    }\n    \n    public function test_class_exists() {\n        $this->assertTrue(class_exists('{{ClassName}}'));\n    }\n    \n    // Add more tests\n}\n```\n{{/if}}\n\n[DOCUMENTATION]\n✅/❌ Added to docs/API.md\n✅/❌ Added to CHANGELOG.md\n✅/❌ Inline comments for complex logic\n\n[INTEGRATION]\n✅/❌ Registered in main plugin file (if needed)\n✅/❌ Hooks registered (if needed)\n✅/❌ Dependencies injected properly\n\n[SUMMARY]\nTotal checks: {{total_checks}}\n✅ Passed: {{passed}}\n❌ Failed: {{failed}}\n⚠️ Warnings: {{warnings}}\n\n[REQUIRED ACTIONS]\n{{#if has_failures}}\nBefore committing:\n{{#each failures}}\n{{@index}}. {{this.description}}\n   Fix: {{this.fix}}\n{{/each}}\n{{/if}}\n\n[OPTIONAL IMPROVEMENTS]\n{{#each improvements}}\n- {{this}}\n{{/each}}\n\n[NEXT STEPS]\n1. {{step1}}\n2. {{step2}}\n3. {{step3}}\n4. Run: php tests/unit/test-{{class-name}}.php\n5. Update documentation\n\n[VERDICT]\n{{#if all_pass}}\n✅ FILE COMPLETE AND READY\n{{else if has_warnings}}\n⚠️ FILE USABLE BUT NEEDS IMPROVEMENTS\n{{else}}\n❌ FILE INCOMPLETE - FIX REQUIRED ISSUES\n{{/if}}\n```\n\nBe thorough and provide specific fixes for each issue."
}
