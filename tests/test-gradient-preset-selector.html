<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Gradient Preset Selector Test - MASE</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
			padding: 20px;
			background: #f0f0f1;
		}

		.test-container {
			max-width: 1200px;
			margin: 0 auto;
			background: white;
			padding: 30px;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		}

		h1 {
			color: #1d2327;
			margin-bottom: 10px;
			font-size: 24px;
		}

		.test-description {
			color: #646970;
			margin-bottom: 30px;
			line-height: 1.6;
		}

		.test-section {
			margin-bottom: 40px;
			padding: 20px;
			background: #f9f9f9;
			border-radius: 6px;
			border: 1px solid #ddd;
		}

		.test-section h2 {
			color: #1d2327;
			font-size: 18px;
			margin-bottom: 15px;
		}

		/* Gradient Preset Selector Styles */
		.mase-gradient-preset-filter {
			margin-bottom: 16px;
		}

		.mase-gradient-category-filter {
			width: 100%;
			max-width: 300px;
			padding: 8px 12px;
			border: 1px solid #ddd;
			border-radius: 4px;
			background: #fff;
			font-size: 14px;
			transition: border-color 0.2s ease;
		}

		.mase-gradient-category-filter:focus {
			border-color: #2271b1;
			outline: none;
			box-shadow: 0 0 0 1px #2271b1;
		}

		.mase-gradient-preset-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
			gap: 12px;
			margin-top: 12px;
			max-height: 400px;
			overflow-y: auto;
			padding: 8px;
			border: 1px solid #ddd;
			border-radius: 8px;
			background: #fafafa;
		}

		.mase-gradient-preset-item {
			position: relative;
			height: 80px;
			border-radius: 6px;
			cursor: pointer;
			transition: all 0.2s ease;
			border: 2px solid transparent;
			overflow: hidden;
		}

		.mase-gradient-preset-item:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
			border-color: #2271b1;
		}

		.mase-gradient-preset-item:focus {
			outline: 2px solid #2271b1;
			outline-offset: 2px;
		}

		.mase-gradient-preset-item.selected {
			border-color: #2271b1;
			box-shadow: 0 0 0 3px rgba(34, 113, 177, 0.2);
		}

		.mase-gradient-preset-preview {
			width: 100%;
			height: 100%;
			border-radius: 4px;
		}

		.mase-gradient-preset-name {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			padding: 4px 8px;
			background: rgba(0, 0, 0, 0.7);
			color: #fff;
			font-size: 11px;
			font-weight: 500;
			text-align: center;
			opacity: 0;
			transition: opacity 0.2s ease;
			pointer-events: none;
		}

		.mase-gradient-preset-item:hover .mase-gradient-preset-name {
			opacity: 1;
		}

		.mase-gradient-preset-item.hidden {
			display: none;
		}

		.test-results {
			margin-top: 20px;
			padding: 15px;
			background: #f0f6fc;
			border-left: 4px solid #2271b1;
			border-radius: 4px;
		}

		.test-results h3 {
			color: #1d2327;
			font-size: 16px;
			margin-bottom: 10px;
		}

		.test-results ul {
			list-style: none;
			padding-left: 0;
		}

		.test-results li {
			padding: 5px 0;
			color: #646970;
		}

		.test-results li.pass::before {
			content: "✓ ";
			color: #00a32a;
			font-weight: bold;
		}

		.test-results li.fail::before {
			content: "✗ ";
			color: #d63638;
			font-weight: bold;
		}

		.selected-preset-info {
			margin-top: 20px;
			padding: 15px;
			background: #fff;
			border: 1px solid #ddd;
			border-radius: 6px;
		}

		.selected-preset-info h3 {
			color: #1d2327;
			font-size: 16px;
			margin-bottom: 10px;
		}

		.selected-preset-info pre {
			background: #f9f9f9;
			padding: 10px;
			border-radius: 4px;
			overflow-x: auto;
			font-size: 12px;
		}
	</style>
</head>
<body>
	<div class="test-container">
		<h1>Gradient Preset Selector Test</h1>
		<p class="test-description">
			Testing the gradient preset selector implementation for Task 17 of the Advanced Background System.
			This test verifies preset display, category filtering, and preset application functionality.
		</p>

		<!-- Test Section 1: Preset Grid Display -->
		<div class="test-section">
			<h2>Test 1: Preset Grid Display</h2>
			<p style="margin-bottom: 15px; color: #646970;">
				All gradient presets should be displayed in a grid layout with visual previews.
			</p>

			<div class="mase-gradient-preset-filter">
				<select class="mase-gradient-category-filter" data-area="dashboard" id="category-filter">
					<option value="all">All Categories</option>
					<option value="warm">Warm</option>
					<option value="cool">Cool</option>
					<option value="vibrant">Vibrant</option>
					<option value="subtle">Subtle</option>
					<option value="nature">Nature</option>
					<option value="radial">Radial</option>
				</select>
			</div>

			<div class="mase-gradient-preset-grid" data-area="dashboard" id="preset-grid">
				<!-- Presets will be populated via JavaScript -->
			</div>

			<div class="selected-preset-info" id="selected-info" style="display: none;">
				<h3>Selected Preset</h3>
				<div id="preset-details"></div>
			</div>
		</div>

		<!-- Test Results -->
		<div class="test-results">
			<h3>Test Results</h3>
			<ul id="test-results-list">
				<li>Running tests...</li>
			</ul>
		</div>
	</div>

	<script>
		// Mock gradient presets data (matching PHP structure)
		const mockGradientPresets = {
			warm: {
				sunset: {
					name: 'Sunset',
					type: 'linear',
					angle: 135,
					colors: [
						{ color: '#ff6b6b', position: 0 },
						{ color: '#feca57', position: 100 }
					]
				},
				fire: {
					name: 'Fire',
					type: 'linear',
					angle: 45,
					colors: [
						{ color: '#f12711', position: 0 },
						{ color: '#f5af19', position: 100 }
					]
				},
				peach: {
					name: 'Peach',
					type: 'linear',
					angle: 90,
					colors: [
						{ color: '#ed4264', position: 0 },
						{ color: '#ffedbc', position: 100 }
					]
				}
			},
			cool: {
				ocean: {
					name: 'Ocean',
					type: 'linear',
					angle: 180,
					colors: [
						{ color: '#667eea', position: 0 },
						{ color: '#764ba2', position: 100 }
					]
				},
				sky: {
					name: 'Sky',
					type: 'linear',
					angle: 135,
					colors: [
						{ color: '#56ccf2', position: 0 },
						{ color: '#2f80ed', position: 100 }
					]
				}
			},
			vibrant: {
				neon: {
					name: 'Neon',
					type: 'linear',
					angle: 45,
					colors: [
						{ color: '#f953c6', position: 0 },
						{ color: '#b91d73', position: 100 }
					]
				}
			},
			radial: {
				'radial-sunset': {
					name: 'Radial Sunset',
					type: 'radial',
					angle: 0,
					colors: [
						{ color: '#ff6b6b', position: 0 },
						{ color: '#feca57', position: 100 }
					]
				}
			}
		};

		// Test functions
		const tests = {
			results: [],

			generateGradientCSS: function(config) {
				if (!config.colors || config.colors.length < 2) {
					return 'linear-gradient(90deg, #667eea 0%, #764ba2 100%)';
				}

				const colorStops = config.colors
					.map(stop => stop.color + ' ' + stop.position + '%')
					.join(', ');

				if (config.type === 'radial') {
					return 'radial-gradient(circle, ' + colorStops + ')';
				} else {
					return 'linear-gradient(' + config.angle + 'deg, ' + colorStops + ')';
				}
			},

			populatePresetGrid: function(gridId, presets) {
				const grid = document.getElementById(gridId);
				grid.innerHTML = '';

				Object.keys(presets).forEach(category => {
					Object.keys(presets[category]).forEach(presetId => {
						const preset = presets[category][presetId];
						const gradientCSS = this.generateGradientCSS({
							type: preset.type,
							angle: preset.angle,
							colors: preset.colors
						});

						const item = document.createElement('div');
						item.className = 'mase-gradient-preset-item';
						item.setAttribute('data-preset-id', presetId);
						item.setAttribute('data-category', category);
						item.setAttribute('role', 'button');
						item.setAttribute('tabindex', '0');
						item.setAttribute('aria-label', preset.name);

						const preview = document.createElement('div');
						preview.className = 'mase-gradient-preset-preview';
						preview.style.background = gradientCSS;

						const name = document.createElement('div');
						name.className = 'mase-gradient-preset-name';
						name.textContent = preset.name;

						item.appendChild(preview);
						item.appendChild(name);
						grid.appendChild(item);

						// Add click handler
						item.addEventListener('click', () => {
							this.selectPreset(item, preset, category, presetId);
						});

						// Add keyboard support
						item.addEventListener('keydown', (e) => {
							if (e.key === 'Enter' || e.key === ' ') {
								e.preventDefault();
								this.selectPreset(item, preset, category, presetId);
							}
						});
					});
				});
			},

			selectPreset: function(item, preset, category, presetId) {
				// Remove previous selection
				document.querySelectorAll('.mase-gradient-preset-item').forEach(el => {
					el.classList.remove('selected');
				});

				// Add selection to clicked item
				item.classList.add('selected');

				// Show preset details
				const infoDiv = document.getElementById('selected-info');
				const detailsDiv = document.getElementById('preset-details');
				
				detailsDiv.innerHTML = `
					<p><strong>Name:</strong> ${preset.name}</p>
					<p><strong>Category:</strong> ${category}</p>
					<p><strong>Type:</strong> ${preset.type}</p>
					<p><strong>Angle:</strong> ${preset.angle}°</p>
					<p><strong>Colors:</strong></p>
					<pre>${JSON.stringify(preset.colors, null, 2)}</pre>
				`;
				
				infoDiv.style.display = 'block';
			},

			filterByCategory: function(category) {
				const items = document.querySelectorAll('.mase-gradient-preset-item');
				
				items.forEach(item => {
					if (category === 'all' || item.getAttribute('data-category') === category) {
						item.classList.remove('hidden');
						item.style.display = 'block';
					} else {
						item.classList.add('hidden');
						item.style.display = 'none';
					}
				});
			},

			runTests: function() {
				const resultsList = document.getElementById('test-results-list');
				resultsList.innerHTML = '';

				// Test 1: Preset grid populated
				const gridItems = document.querySelectorAll('.mase-gradient-preset-item');
				this.addResult(
					gridItems.length > 0,
					`Preset grid populated (${gridItems.length} presets found)`
				);

				// Test 2: All categories present
				const categories = new Set();
				gridItems.forEach(item => {
					categories.add(item.getAttribute('data-category'));
				});
				this.addResult(
					categories.size >= 4,
					`Multiple categories present (${categories.size} categories)`
				);

				// Test 3: Gradient CSS generation
				const testGradient = this.generateGradientCSS({
					type: 'linear',
					angle: 90,
					colors: [
						{ color: '#ff0000', position: 0 },
						{ color: '#0000ff', position: 100 }
					]
				});
				this.addResult(
					testGradient.includes('linear-gradient') && testGradient.includes('#ff0000'),
					'Gradient CSS generation works'
				);

				// Test 4: Category filter functionality
				this.filterByCategory('warm');
				const visibleAfterFilter = document.querySelectorAll('.mase-gradient-preset-item:not(.hidden)').length;
				this.filterByCategory('all');
				this.addResult(
					visibleAfterFilter > 0 && visibleAfterFilter < gridItems.length,
					`Category filtering works (${visibleAfterFilter} items in 'warm' category)`
				);

				// Test 5: Preset selection
				const firstItem = gridItems[0];
				if (firstItem) {
					firstItem.click();
					const isSelected = firstItem.classList.contains('selected');
					this.addResult(
						isSelected,
						'Preset selection works'
					);
				}

				// Display results
				this.results.forEach(result => {
					const li = document.createElement('li');
					li.className = result.pass ? 'pass' : 'fail';
					li.textContent = result.message;
					resultsList.appendChild(li);
				});
			},

			addResult: function(pass, message) {
				this.results.push({ pass, message });
			}
		};

		// Initialize on page load
		document.addEventListener('DOMContentLoaded', function() {
			// Populate preset grid
			tests.populatePresetGrid('preset-grid', mockGradientPresets);

			// Setup category filter
			document.getElementById('category-filter').addEventListener('change', function(e) {
				tests.filterByCategory(e.target.value);
			});

			// Run tests after a short delay
			setTimeout(() => {
				tests.runTests();
			}, 500);
		});
	</script>
</body>
</html>
