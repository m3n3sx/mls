<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test showNotice Method - Task 22</title>
    <link rel="stylesheet" href="../assets/css/mase-admin.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            padding: 20px;
            background: #f0f0f1;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1d2327;
            margin-bottom: 10px;
        }
        .test-info {
            background: #f0f6fc;
            border-left: 4px solid #0073aa;
            padding: 15px;
            margin-bottom: 30px;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 200ms ease;
        }
        .btn-success {
            background: #10b981;
            color: white;
        }
        .btn-success:hover {
            background: #059669;
        }
        .btn-error {
            background: #ef4444;
            color: white;
        }
        .btn-error:hover {
            background: #dc2626;
        }
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        .btn-warning:hover {
            background: #d97706;
        }
        .btn-info {
            background: #3b82f6;
            color: white;
        }
        .btn-info:hover {
            background: #2563eb;
        }
        .mase-settings-container {
            margin-top: 20px;
            min-height: 200px;
        }
        .test-results {
            margin-top: 30px;
            padding: 20px;
            background: #f9fafb;
            border-radius: 4px;
        }
        .test-results h3 {
            margin-top: 0;
            color: #1d2327;
        }
        .test-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
        }
        .test-pass {
            background: #d1fae5;
            color: #065f46;
        }
        .test-fail {
            background: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Task 22: showNotice Method Test</h1>
        <div class="test-info">
            <strong>Requirements:</strong>
            <ul>
                <li>13.1: Display success/error notifications</li>
                <li>13.2: Include message in notification</li>
                <li>13.3: Display error notifications</li>
                <li>13.4: Display network error notifications</li>
                <li>13.5: Auto-dismiss success notifications after 3 seconds</li>
            </ul>
        </div>

        <h2>Test Controls</h2>
        <div class="button-group">
            <button class="btn-success" onclick="testSuccess()">Test Success Notice</button>
            <button class="btn-error" onclick="testError()">Test Error Notice</button>
            <button class="btn-warning" onclick="testWarning()">Test Warning Notice</button>
            <button class="btn-info" onclick="testInfo()">Test Info Notice</button>
        </div>

        <h2>Notice Display Area</h2>
        <div class="mase-settings-container">
            <!-- Notices will appear here -->
        </div>

        <div class="test-results">
            <h3>Test Results</h3>
            <div id="test-output">
                <p>Click the buttons above to test the showNotice method.</p>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../assets/js/mase-admin.js"></script>
    <script>
        // Test counter
        let testCount = 0;
        let passCount = 0;
        let failCount = 0;

        function logTest(name, passed, message) {
            testCount++;
            if (passed) {
                passCount++;
            } else {
                failCount++;
            }
            
            const testClass = passed ? 'test-pass' : 'test-fail';
            const status = passed ? '✓ PASS' : '✗ FAIL';
            const output = document.getElementById('test-output');
            
            const testItem = document.createElement('div');
            testItem.className = 'test-item ' + testClass;
            testItem.innerHTML = `<strong>${status}</strong>: ${name} - ${message}`;
            output.appendChild(testItem);
        }

        function testSuccess() {
            console.log('Testing success notice...');
            
            // Clear previous notices
            $('.mase-notice').remove();
            
            // Call showNotice
            MASE.showNotice('success', 'Palette applied successfully!');
            
            // Test 1: Notice element created
            setTimeout(() => {
                const $notice = $('.mase-notice-success');
                logTest('Success Notice Creation', $notice.length === 1, 
                    $notice.length === 1 ? 'Notice element created' : 'Notice element not found');
                
                // Test 2: Has correct classes
                const hasClasses = $notice.hasClass('mase-notice') && $notice.hasClass('mase-notice-success');
                logTest('Success Notice Classes', hasClasses, 
                    hasClasses ? 'Has mase-notice and mase-notice-success classes' : 'Missing required classes');
                
                // Test 3: Contains message
                const hasMessage = $notice.text().includes('Palette applied successfully!');
                logTest('Success Notice Message', hasMessage, 
                    hasMessage ? 'Message displayed correctly' : 'Message not found');
                
                // Test 4: Auto-dismiss after 3 seconds
                setTimeout(() => {
                    const stillExists = $('.mase-notice-success').length > 0;
                    logTest('Success Notice Auto-Dismiss', !stillExists, 
                        !stillExists ? 'Notice auto-dismissed after 3 seconds' : 'Notice still visible after 3 seconds');
                }, 3500);
            }, 100);
        }

        function testError() {
            console.log('Testing error notice...');
            
            // Clear previous notices
            $('.mase-notice').remove();
            
            // Call showNotice
            MASE.showNotice('error', 'Failed to apply palette. Please try again.');
            
            // Test 1: Notice element created
            setTimeout(() => {
                const $notice = $('.mase-notice-error');
                logTest('Error Notice Creation', $notice.length === 1, 
                    $notice.length === 1 ? 'Notice element created' : 'Notice element not found');
                
                // Test 2: Has correct classes
                const hasClasses = $notice.hasClass('mase-notice') && $notice.hasClass('mase-notice-error');
                logTest('Error Notice Classes', hasClasses, 
                    hasClasses ? 'Has mase-notice and mase-notice-error classes' : 'Missing required classes');
                
                // Test 3: Contains message
                const hasMessage = $notice.text().includes('Failed to apply palette');
                logTest('Error Notice Message', hasMessage, 
                    hasMessage ? 'Message displayed correctly' : 'Message not found');
                
                // Test 4: Does NOT auto-dismiss (should still be visible after 3 seconds)
                setTimeout(() => {
                    const stillExists = $('.mase-notice-error').length > 0;
                    logTest('Error Notice Persistence', stillExists, 
                        stillExists ? 'Error notice persists (does not auto-dismiss)' : 'Error notice incorrectly dismissed');
                }, 3500);
            }, 100);
        }

        function testWarning() {
            console.log('Testing warning notice...');
            $('.mase-notice').remove();
            MASE.showNotice('warning', 'This is a warning message.');
            
            setTimeout(() => {
                const $notice = $('.mase-notice-warning');
                logTest('Warning Notice', $notice.length === 1, 
                    $notice.length === 1 ? 'Warning notice created' : 'Warning notice not found');
            }, 100);
        }

        function testInfo() {
            console.log('Testing info notice...');
            $('.mase-notice').remove();
            MASE.showNotice('info', 'This is an informational message.');
            
            setTimeout(() => {
                const $notice = $('.mase-notice-info');
                logTest('Info Notice', $notice.length === 1, 
                    $notice.length === 1 ? 'Info notice created' : 'Info notice not found');
            }, 100);
        }

        // Initialize MASE if needed
        $(document).ready(function() {
            console.log('Test page loaded. MASE object:', MASE);
            console.log('showNotice method:', typeof MASE.showNotice);
        });
    </script>
</body>
</html>
