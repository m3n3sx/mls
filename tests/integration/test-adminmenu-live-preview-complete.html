<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Menu Live Preview Integration Tests</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 20px;
            background: #f0f0f1;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 { color: #1d2327; margin-bottom: 10px; }
        h2 { color: #2c3338; margin-top: 30px; border-bottom: 2px solid #0073aa; padding-bottom: 10px; }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f6f7f7;
            border-left: 4px solid #0073aa;
        }
        .control-group {
            margin: 15px 0;
        }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #1d2327;
        }
        input[type="range"], input[type="number"], select {
            width: 100%;
            max-width: 300px;
            padding: 5px;
        }
        input[type="color"] {
            width: 60px;
            height: 40px;
            border: none;
            cursor: pointer;
        }
        button {
            background: #2271b1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover { background: #135e96; }
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: #f0f6fc;
            border-left: 4px solid #0073aa;
        }
        .test-pass { color: #00a32a; font-weight: 600; }
        .test-fail { color: #d63638; font-weight: 600; }
        #adminmenu {
            position: fixed;
            left: 0;
            top: 32px;
            width: 160px;
            background: #23282d;
            color: #fff;
            min-height: calc(100vh - 32px);
            z-index: 9990;
        }
        #adminmenu li.menu-top > a {
            display: block;
            padding: 10px 15px;
            color: #fff;
            text-decoration: none;
        }
        #adminmenu li.menu-top:hover > a {
            background: #0073aa;
        }
        #adminmenu .wp-menu-image {
            width: 20px;
            height: 20px;
            display: inline-block;
            margin-right: 10px;
        }
        #adminmenu .wp-submenu {
            position: absolute;
            left: 160px;
            top: 0;
            background: #32373c;
            display: none;
            min-width: 160px;
        }
        #adminmenu li.menu-top:hover .wp-submenu {
            display: block;
        }
        #adminmenu .wp-submenu a {
            display: block;
            padding: 8px 12px;
            color: #fff;
            text-decoration: none;
        }
        .mase-menu-logo {
            padding: 20px;
            text-align: center;
            display: none;
        }
        .mase-menu-logo img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Admin Menu Live Preview Integration Tests</h1>
        <p>Test all live preview functionality for admin menu enhancements</p>

        <h2>Test Controls</h2>
        
        <div class="test-section">
            <h3>Height Mode (Requirement 4.4, 5.1)</h3>
            <div class="control-group">
                <label for="height-mode">Height Mode:</label>
                <select id="height-mode">
                    <option value="full">Full Height (100%)</option>
                    <option value="content">Fit to Content</option>
                </select>
            </div>
        </div>
        
        <div class="test-section">
            <h3>Padding Controls (Requirement 1.2, 1.4)</h3>
            <div class="control-group">
                <label for="padding-vertical">Vertical Padding: <span id="padding-v-value">10</span>px</label>
                <input type="range" id="padding-vertical" min="5" max="30" value="10">
            </div>
            <div class="control-group">
                <label for="padding-horizontal">Horizontal Padding: <span id="padding-h-value">15</span>px</label>
                <input type="range" id="padding-horizontal" min="5" max="30" value="15">
            </div>
        </div>
        
        <div class="test-section">
            <h3>Icon Color (Requirement 2.1, 2.2)</h3>
            <div class="control-group">
                <label for="icon-color-mode">Icon Color Mode:</label>
                <select id="icon-color-mode">
                    <option value="auto">Auto (Match Text Color)</option>
                    <option value="custom">Custom Color</option>
                </select>
            </div>
            <div class="control-group" id="custom-icon-color-group" style="display:none;">
                <label for="icon-color">Custom Icon Color:</label>
                <input type="color" id="icon-color" value="#ffffff">
            </div>
        </div>
        
        <div class="test-section">
            <h3>Width & Submenu Positioning (Requirement 3.1, 14.4)</h3>
            <div class="control-group">
                <label for="menu-width">Menu Width: <span id="width-value">160</span>px</label>
                <input type="range" id="menu-width" min="100" max="400" value="160">
            </div>
            <div class="control-group">
                <label for="submenu-spacing">Submenu Spacing: <span id="spacing-value">0</span>px</label>
                <input type="range" id="submenu-spacing" min="0" max="50" value="0">
            </div>
        </div>
        
        <div class="test-section">
            <h3>Border Radius (Requirement 12.5)</h3>
            <div class="control-group">
                <label for="border-radius">Border Radius: <span id="radius-value">0</span>px</label>
                <input type="range" id="border-radius" min="0" max="50" value="0">
            </div>
        </div>
        
        <button onclick="runAllTests()">Run All Tests</button>
        <button onclick="resetToDefaults()">Reset to Defaults</button>
        
        <div class="test-results" id="test-results">
            <h3>Test Results</h3>
            <div id="results-content">Click "Run All Tests" to begin</div>
        </div>
    </div>

    <!-- Mock Admin Menu -->
    <div id="adminmenu">
        <div class="mase-menu-logo">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='40'%3E%3Crect fill='%23fff' width='100' height='40'/%3E%3Ctext x='50' y='25' text-anchor='middle' fill='%23000' font-size='16'%3ELOGO%3C/text%3E%3C/svg%3E" alt="Logo">
        </div>
        <ul>
            <li class="menu-top">
                <a href="#">
                    <span class="wp-menu-image">üìä</span>
                    <span class="wp-menu-name">Dashboard</span>
                </a>
            </li>
            <li class="menu-top">
                <a href="#">
                    <span class="wp-menu-image">üìù</span>
                    <span class="wp-menu-name">Posts</span>
                </a>
                <ul class="wp-submenu">
                    <li><a href="#">All Posts</a></li>
                    <li><a href="#">Add New</a></li>
                    <li><a href="#">Categories</a></li>
                </ul>
            </li>
            <li class="menu-top">
                <a href="#">
                    <span class="wp-menu-image">üìÑ</span>
                    <span class="wp-menu-name">Pages</span>
                </a>
                <ul class="wp-submenu">
                    <li><a href="#">All Pages</a></li>
                    <li><a href="#">Add New</a></li>
                </ul>
            </li>
            <li class="menu-top">
                <a href="#">
                    <span class="wp-menu-image">‚öôÔ∏è</span>
                    <span class="wp-menu-name">Settings</span>
                </a>
            </li>
        </ul>
    </div>

    <script>
        let testResults = [];
        
        // Initialize event listeners
        document.getElementById('height-mode').addEventListener('change', updateHeightMode);
        document.getElementById('padding-vertical').addEventListener('input', updatePadding);
        document.getElementById('padding-horizontal').addEventListener('input', updatePadding);
        document.getElementById('icon-color-mode').addEventListener('change', updateIconColorMode);
        document.getElementById('icon-color').addEventListener('input', updateIconColor);
        document.getElementById('menu-width').addEventListener('input', updateWidth);
        document.getElementById('submenu-spacing').addEventListener('input', updateSubmenuSpacing);
        document.getElementById('border-radius').addEventListener('input', updateBorderRadius);
        
        // Update value displays
        document.getElementById('padding-vertical').addEventListener('input', function() {
            document.getElementById('padding-v-value').textContent = this.value;
        });
        document.getElementById('padding-horizontal').addEventListener('input', function() {
            document.getElementById('padding-h-value').textContent = this.value;
        });
        document.getElementById('menu-width').addEventListener('input', function() {
            document.getElementById('width-value').textContent = this.value;
        });
        document.getElementById('submenu-spacing').addEventListener('input', function() {
            document.getElementById('spacing-value').textContent = this.value;
        });
        document.getElementById('border-radius').addEventListener('input', function() {
            document.getElementById('radius-value').textContent = this.value;
        });

        function updateHeightMode() {
            const mode = this.value;
            const menu = document.getElementById('adminmenu');
            
            if (mode === 'content') {
                menu.style.height = 'auto';
                menu.style.minHeight = 'calc(100vh - 32px)';
            } else {
                menu.style.height = 'calc(100vh - 32px)';
                menu.style.minHeight = '';
            }
        }
        
        function updatePadding() {
            const vPadding = document.getElementById('padding-vertical').value;
            const hPadding = document.getElementById('padding-horizontal').value;
            const items = document.querySelectorAll('#adminmenu li.menu-top > a');
            
            items.forEach(item => {
                item.style.padding = `${vPadding}px ${hPadding}px`;
            });
        }
        
        function updateIconColorMode() {
            const mode = this.value;
            const customGroup = document.getElementById('custom-icon-color-group');
            
            if (mode === 'custom') {
                customGroup.style.display = 'block';
                updateIconColor();
            } else {
                customGroup.style.display = 'none';
                // Auto mode: icons match text color
                const icons = document.querySelectorAll('#adminmenu .wp-menu-image');
                icons.forEach(icon => {
                    icon.style.color = '#ffffff';
                });
            }
        }
        
        function updateIconColor() {
            const color = document.getElementById('icon-color').value;
            const icons = document.querySelectorAll('#adminmenu .wp-menu-image');
            
            icons.forEach(icon => {
                icon.style.color = color;
            });
        }
        
        function updateWidth() {
            const width = this.value;
            const menu = document.getElementById('adminmenu');
            const submenus = document.querySelectorAll('#adminmenu .wp-submenu');
            
            menu.style.width = `${width}px`;
            
            // Update submenu positioning
            const spacing = document.getElementById('submenu-spacing').value;
            submenus.forEach(submenu => {
                submenu.style.left = `${width}px`;
                submenu.style.top = `${spacing}px`;
            });
        }
        
        function updateSubmenuSpacing() {
            const spacing = this.value;
            const width = document.getElementById('menu-width').value;
            const submenus = document.querySelectorAll('#adminmenu .wp-submenu');
            
            submenus.forEach(submenu => {
                submenu.style.top = `${spacing}px`;
                submenu.style.left = `${width}px`;
            });
        }
        
        function updateBorderRadius() {
            const radius = this.value;
            const menu = document.getElementById('adminmenu');
            menu.style.borderRadius = `${radius}px`;
        }

        function runAllTests() {
            testResults = [];
            
            // Test 1: Height Mode
            testHeightMode();
            
            // Test 2: Padding
            testPadding();
            
            // Test 3: Icon Color
            testIconColor();
            
            // Test 4: Width and Submenu Positioning
            testWidthAndSubmenu();
            
            // Test 5: Border Radius
            testBorderRadius();
            
            displayResults();
        }
        
        function testHeightMode() {
            const menu = document.getElementById('adminmenu');
            const select = document.getElementById('height-mode');
            
            // Test full mode
            select.value = 'full';
            select.dispatchEvent(new Event('change'));
            const fullHeight = window.getComputedStyle(menu).height;
            addTestResult('Height Mode - Full', fullHeight !== 'auto', 
                `Height is ${fullHeight}`);
            
            // Test content mode
            select.value = 'content';
            select.dispatchEvent(new Event('change'));
            const contentHeight = window.getComputedStyle(menu).height;
            const minHeight = window.getComputedStyle(menu).minHeight;
            addTestResult('Height Mode - Content', contentHeight === 'auto' || minHeight !== '0px',
                `Height is ${contentHeight}, min-height is ${minHeight}`);
        }
        
        function testPadding() {
            const vSlider = document.getElementById('padding-vertical');
            const hSlider = document.getElementById('padding-horizontal');
            
            vSlider.value = 20;
            hSlider.value = 25;
            vSlider.dispatchEvent(new Event('input'));
            hSlider.dispatchEvent(new Event('input'));
            
            const item = document.querySelector('#adminmenu li.menu-top > a');
            const padding = window.getComputedStyle(item).padding;
            
            addTestResult('Padding Update', padding.includes('20px') && padding.includes('25px'),
                `Padding is ${padding}`);
        }
        
        function testIconColor() {
            const modeSelect = document.getElementById('icon-color-mode');
            const colorInput = document.getElementById('icon-color');
            
            // Test custom mode
            modeSelect.value = 'custom';
            modeSelect.dispatchEvent(new Event('change'));
            colorInput.value = '#ff0000';
            colorInput.dispatchEvent(new Event('input'));
            
            const icon = document.querySelector('#adminmenu .wp-menu-image');
            const color = window.getComputedStyle(icon).color;
            
            addTestResult('Icon Color - Custom', color === 'rgb(255, 0, 0)',
                `Icon color is ${color}`);
        }
        
        function testWidthAndSubmenu() {
            const widthSlider = document.getElementById('menu-width');
            const spacingSlider = document.getElementById('submenu-spacing');
            
            widthSlider.value = 200;
            spacingSlider.value = 10;
            widthSlider.dispatchEvent(new Event('input'));
            spacingSlider.dispatchEvent(new Event('input'));
            
            const menu = document.getElementById('adminmenu');
            const submenu = document.querySelector('#adminmenu .wp-submenu');
            
            const menuWidth = window.getComputedStyle(menu).width;
            const submenuLeft = window.getComputedStyle(submenu).left;
            const submenuTop = window.getComputedStyle(submenu).top;
            
            addTestResult('Width Update', menuWidth === '200px',
                `Menu width is ${menuWidth}`);
            addTestResult('Submenu Positioning', submenuLeft === '200px' && submenuTop === '10px',
                `Submenu left: ${submenuLeft}, top: ${submenuTop}`);
        }
        
        function testBorderRadius() {
            const radiusSlider = document.getElementById('border-radius');
            
            radiusSlider.value = 15;
            radiusSlider.dispatchEvent(new Event('input'));
            
            const menu = document.getElementById('adminmenu');
            const radius = window.getComputedStyle(menu).borderRadius;
            
            addTestResult('Border Radius', radius === '15px',
                `Border radius is ${radius}`);
        }
        
        function addTestResult(name, passed, message) {
            testResults.push({ name, passed, message });
        }
        
        function displayResults() {
            const container = document.getElementById('results-content');
            const total = testResults.length;
            const passed = testResults.filter(r => r.passed).length;
            const failed = total - passed;
            
            let html = `<p><strong>Total Tests:</strong> ${total} | `;
            html += `<span class="test-pass">Passed: ${passed}</span> | `;
            html += `<span class="test-fail">Failed: ${failed}</span></p>`;
            html += '<ul>';
            
            testResults.forEach(result => {
                const className = result.passed ? 'test-pass' : 'test-fail';
                const icon = result.passed ? '‚úì' : '‚úó';
                html += `<li class="${className}">${icon} ${result.name}: ${result.message}</li>`;
            });
            
            html += '</ul>';
            container.innerHTML = html;
        }
        
        function resetToDefaults() {
            document.getElementById('height-mode').value = 'full';
            document.getElementById('padding-vertical').value = 10;
            document.getElementById('padding-horizontal').value = 15;
            document.getElementById('icon-color-mode').value = 'auto';
            document.getElementById('menu-width').value = 160;
            document.getElementById('submenu-spacing').value = 0;
            document.getElementById('border-radius').value = 0;
            
            // Trigger updates
            document.getElementById('height-mode').dispatchEvent(new Event('change'));
            document.getElementById('padding-vertical').dispatchEvent(new Event('input'));
            document.getElementById('padding-horizontal').dispatchEvent(new Event('input'));
            document.getElementById('icon-color-mode').dispatchEvent(new Event('change'));
            document.getElementById('menu-width').dispatchEvent(new Event('input'));
            document.getElementById('submenu-spacing').dispatchEvent(new Event('input'));
            document.getElementById('border-radius').dispatchEvent(new Event('input'));
            
            document.getElementById('results-content').innerHTML = 'Reset to defaults';
        }
    </script>
</body>
</html>
