<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradient Builder UI Test - MASE</title>
    
    <!-- WordPress Admin Styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dashicons/0.9.0/dashicons.min.css">
    
    <!-- MASE Admin Styles -->
    <link rel="stylesheet" href="../assets/css/mase-admin.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            padding: 20px;
            background: #f0f0f1;
        }
        
        .test-container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        h1 {
            margin-top: 0;
            color: #1d2327;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #2271b1;
        }
        
        /* Mock WordPress color picker styles */
        .wp-picker-container {
            display: inline-block;
        }
        
        .wp-color-result {
            display: inline-block;
            width: 60px;
            height: 36px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Gradient Builder UI Test</h1>
        <p>This page tests the gradient builder UI components for the Advanced Background System.</p>
        
        <!-- Test Section 1: Gradient Type Selector -->
        <div class="test-section">
            <h2>1. Gradient Type Selector</h2>
            <div class="mase-setting-row">
                <div class="mase-setting-label">
                    <label for="gradient-type-test">Gradient Type</label>
                </div>
                <div class="mase-setting-control">
                    <select id="gradient-type-test" class="mase-gradient-type" data-area="test">
                        <option value="linear">Linear Gradient</option>
                        <option value="radial">Radial Gradient</option>
                    </select>
                    <p class="description">Choose between linear (directional) or radial (circular) gradient.</p>
                </div>
            </div>
        </div>
        
        <!-- Test Section 2: Angle Control with Visual Dial -->
        <div class="test-section">
            <h2>2. Angle Control with Visual Dial</h2>
            <div class="mase-setting-row mase-gradient-angle-row">
                <div class="mase-setting-label">
                    <label for="gradient-angle-test">Gradient Angle</label>
                </div>
                <div class="mase-setting-control">
                    <div class="mase-gradient-angle-control">
                        <!-- Visual Dial -->
                        <div class="mase-gradient-angle-dial-container">
                            <div class="mase-gradient-angle-dial" data-area="test" style="transform: rotate(90deg);">
                                <div class="mase-dial-pointer"></div>
                            </div>
                        </div>
                        <!-- Numeric Input -->
                        <div class="mase-gradient-angle-input-container">
                            <input type="number" id="gradient-angle-test" class="mase-gradient-angle-input" data-area="test" value="90" min="0" max="360" step="1" />
                            <span class="mase-input-suffix">°</span>
                        </div>
                    </div>
                    <p class="description">Set the gradient direction (0-360 degrees). Drag the dial or enter a value.</p>
                </div>
            </div>
        </div>
        
        <!-- Test Section 3: Color Stops -->
        <div class="test-section">
            <h2>3. Color Stops Management</h2>
            <div class="mase-setting-row">
                <div class="mase-setting-label">
                    <label>Color Stops</label>
                </div>
                <div class="mase-setting-control">
                    <div class="mase-gradient-color-stops" data-area="test">
                        <!-- Color Stop 1 -->
                        <div class="mase-color-stop" data-index="0">
                            <div class="mase-color-stop-color">
                                <input type="text" class="mase-color-picker" value="#667eea" data-default-color="#667eea" />
                            </div>
                            <div class="mase-color-stop-position">
                                <input type="number" class="mase-stop-position" value="0" min="0" max="100" step="1" />
                                <span class="mase-input-suffix">%</span>
                            </div>
                            <button type="button" class="button button-link-delete mase-remove-color-stop" data-area="test" disabled>
                                <span class="dashicons dashicons-no-alt"></span>
                            </button>
                        </div>
                        
                        <!-- Color Stop 2 -->
                        <div class="mase-color-stop" data-index="1">
                            <div class="mase-color-stop-color">
                                <input type="text" class="mase-color-picker" value="#764ba2" data-default-color="#764ba2" />
                            </div>
                            <div class="mase-color-stop-position">
                                <input type="number" class="mase-stop-position" value="100" min="0" max="100" step="1" />
                                <span class="mase-input-suffix">%</span>
                            </div>
                            <button type="button" class="button button-link-delete mase-remove-color-stop" data-area="test" disabled>
                                <span class="dashicons dashicons-no-alt"></span>
                            </button>
                        </div>
                    </div>
                    
                    <button type="button" class="button button-secondary mase-add-color-stop" data-area="test">
                        <span class="dashicons dashicons-plus-alt"></span>
                        Add Color Stop
                    </button>
                    
                    <p class="description">Add 2-10 color stops to create your gradient. Adjust position (0-100%) for each color.</p>
                </div>
            </div>
        </div>
        
        <!-- Test Section 4: Gradient Preview -->
        <div class="test-section">
            <h2>4. Gradient Preview</h2>
            <div class="mase-setting-row">
                <div class="mase-setting-label">
                    <label>Gradient Preview</label>
                </div>
                <div class="mase-setting-control">
                    <div class="mase-gradient-preview" data-area="test"></div>
                    <p class="description">Live preview of your gradient configuration.</p>
                </div>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h2>Test Results</h2>
            <div id="test-results">
                <p><strong>Status:</strong> <span id="test-status">Initializing...</span></p>
                <p><strong>Generated CSS:</strong></p>
                <pre id="generated-css" style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto;"></pre>
            </div>
        </div>
    </div>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Mock WordPress Color Picker -->
    <script>
        // Simple mock of WordPress color picker for testing
        (function($) {
            $.fn.wpColorPicker = function(options) {
                return this.each(function() {
                    var $input = $(this);
                    var $container = $('<div class="wp-picker-container"></div>');
                    var $result = $('<button type="button" class="wp-color-result"></button>');
                    
                    $result.css('background-color', $input.val());
                    $result.on('click', function() {
                        var color = prompt('Enter color (hex):', $input.val());
                        if (color) {
                            $input.val(color).trigger('change');
                            $result.css('background-color', color);
                            if (options && options.change) {
                                options.change.call($input[0], null, { color: { toString: function() { return color; } } });
                            }
                        }
                    });
                    
                    $input.hide().after($container.append($result));
                    
                    $input.on('change', function() {
                        $result.css('background-color', $input.val());
                    });
                });
            };
        })(jQuery);
    </script>
    
    <!-- MASE Gradient Builder Module -->
    <script src="../assets/js/modules/mase-gradient-builder.js"></script>
    
    <!-- Test Script -->
    <script>
        jQuery(document).ready(function($) {
            // Initialize MASE namespace if not exists
            window.MASE = window.MASE || {};
            
            // Mock showNotice function
            MASE.showNotice = function(message, type) {
                console.log('[' + type.toUpperCase() + '] ' + message);
                alert(message);
            };
            
            // Update test results
            function updateTestResults() {
                var config = MASE.gradientBuilder.getGradientConfig('test');
                var css = MASE.gradientBuilder.generateGradientCSS(config);
                
                $('#test-status').text('✓ Gradient builder initialized successfully');
                $('#generated-css').text(css);
            }
            
            // Update results on any change
            $(document).on('input change', '.mase-gradient-type, .mase-gradient-angle-input, .mase-color-picker, .mase-stop-position', function() {
                setTimeout(updateTestResults, 100);
            });
            
            // Initial update
            setTimeout(updateTestResults, 500);
            
            console.log('Gradient Builder UI Test initialized');
        });
    </script>
</body>
</html>
