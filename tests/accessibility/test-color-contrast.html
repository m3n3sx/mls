<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MASE - Color Contrast Test (WCAG AA 4.5:1)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            padding: 20px;
            background: #f0f0f1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: #ffffff;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #64748b;
            font-size: 14px;
        }
        
        .tool-section {
            background: #ffffff;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #1e293b;
            margin-bottom: 16px;
            border-bottom: 2px solid #4A90E2;
            padding-bottom: 8px;
        }
        
        .contrast-checker {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .color-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .color-input-group label {
            font-weight: 600;
            color: #1e293b;
        }
        
        .color-input-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        input[type="color"] {
            width: 60px;
            height: 40px;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            cursor: pointer;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .preview-box {
            grid-column: 1 / -1;
            padding: 40px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }
        
        .preview-text {
            font-size: 18px;
            font-weight: 400;
            margin-bottom: 12px;
        }
        
        .preview-text-large {
            font-size: 24px;
            font-weight: 700;
        }
        
        .results {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .result-card {
            padding: 16px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }
        
        .result-card h3 {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .result-status {
            font-size: 14px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .result-card.pass {
            background: #d4edda;
            border-color: #46b450;
        }
        
        .result-card.pass .result-value {
            color: #155724;
        }
        
        .result-card.pass .result-status {
            background: #46b450;
            color: #ffffff;
        }
        
        .result-card.fail {
            background: #f8d7da;
            border-color: #dc3232;
        }
        
        .result-card.fail .result-value {
            color: #721c24;
        }
        
        .result-card.fail .result-status {
            background: #dc3232;
            color: #ffffff;
        }
        
        .palette-tests {
            display: grid;
            gap: 16px;
        }
        
        .palette-test {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
        }
        
        .palette-test h3 {
            margin-bottom: 12px;
            color: #1e293b;
        }
        
        .palette-colors {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .color-sample {
            padding: 20px;
            border-radius: 4px;
            text-align: center;
            font-weight: 600;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .contrast-results {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .contrast-badge {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .contrast-badge.pass {
            background: #46b450;
            color: #ffffff;
        }
        
        .contrast-badge.fail {
            background: #dc3232;
            color: #ffffff;
        }
        
        .wcag-info {
            background: #f8f9fa;
            border-left: 4px solid #4A90E2;
            padding: 16px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .wcag-info h3 {
            margin-bottom: 8px;
            color: #1e293b;
        }
        
        .wcag-info ul {
            margin-left: 20px;
        }
        
        .wcag-info li {
            margin: 4px 0;
            color: #475569;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ¨ Color Contrast Checker</h1>
            <p class="subtitle">Test color combinations for WCAG 2.1 AA/AAA compliance (Requirement 13.1)</p>
        </div>
        
        <div class="tool-section">
            <h2>Interactive Contrast Checker</h2>
            
            <div class="wcag-info">
                <h3>WCAG 2.1 Requirements:</h3>
                <ul>
                    <li><strong>AA Normal Text:</strong> 4.5:1 minimum contrast ratio</li>
                    <li><strong>AA Large Text:</strong> 3:1 minimum contrast ratio (18pt+ or 14pt+ bold)</li>
                    <li><strong>AAA Normal Text:</strong> 7:1 minimum contrast ratio</li>
                    <li><strong>AAA Large Text:</strong> 4.5:1 minimum contrast ratio</li>
                    <li><strong>UI Components:</strong> 3:1 minimum contrast ratio</li>
                </ul>
            </div>
            
            <div class="contrast-checker">
                <div class="color-input-group">
                    <label for="fg-color">Foreground Color (Text):</label>
                    <div class="color-input-wrapper">
                        <input type="color" id="fg-color" value="#1e293b">
                        <input type="text" id="fg-hex" value="#1e293b" pattern="^#[0-9A-Fa-f]{6}$">
                    </div>
                </div>
                
                <div class="color-input-group">
                    <label for="bg-color">Background Color:</label>
                    <div class="color-input-wrapper">
                        <input type="color" id="bg-color" value="#ffffff">
                        <input type="text" id="bg-hex" value="#ffffff" pattern="^#[0-9A-Fa-f]{6}$">
                    </div>
                </div>
                
                <div class="preview-box" id="preview-box">
                    <div class="preview-text">Normal text (18px) - The quick brown fox jumps over the lazy dog</div>
                    <div class="preview-text-large">Large text (24px bold) - The quick brown fox</div>
                </div>
                
                <div class="results">
                    <div class="result-card" id="ratio-card">
                        <h3>Contrast Ratio</h3>
                        <div class="result-value" id="ratio-value">0:1</div>
                        <span class="result-status" id="ratio-status">-</span>
                    </div>
                    
                    <div class="result-card" id="aa-normal-card">
                        <h3>AA Normal Text</h3>
                        <div class="result-value">4.5:1</div>
                        <span class="result-status" id="aa-normal-status">-</span>
                    </div>
                    
                    <div class="result-card" id="aa-large-card">
                        <h3>AA Large Text</h3>
                        <div class="result-value">3:1</div>
                        <span class="result-status" id="aa-large-status">-</span>
                    </div>
                    
                    <div class="result-card" id="aaa-normal-card">
                        <h3>AAA Normal Text</h3>
                        <div class="result-value">7:1</div>
                        <span class="result-status" id="aaa-normal-status">-</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tool-section">
            <h2>MASE Palette Contrast Tests</h2>
            <p style="margin-bottom: 16px; color: #64748b;">Testing all 10 color palettes for WCAG AA compliance</p>
            
            <div class="palette-tests" id="palette-tests">
                <!-- Palette tests will be inserted here -->
            </div>
        </div>
    </div>
    
    <script>
        // Contrast calculation functions
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
        
        function getLuminance(r, g, b) {
            const [rs, gs, bs] = [r, g, b].map(c => {
                c = c / 255;
                return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
        }
        
        function getContrastRatio(color1, color2) {
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            
            if (!rgb1 || !rgb2) return 0;
            
            const lum1 = getLuminance(rgb1.r, rgb1.g, rgb1.b);
            const lum2 = getLuminance(rgb2.r, rgb2.g, rgb2.b);
            
            const lighter = Math.max(lum1, lum2);
            const darker = Math.min(lum1, lum2);
            
            return (lighter + 0.05) / (darker + 0.05);
        }
        
        // Interactive checker
        const fgColor = document.getElementById('fg-color');
        const bgColor = document.getElementById('bg-color');
        const fgHex = document.getElementById('fg-hex');
        const bgHex = document.getElementById('bg-hex');
        const previewBox = document.getElementById('preview-box');
        const ratioValue = document.getElementById('ratio-value');
        const ratioCard = document.getElementById('ratio-card');
        const aaNormalCard = document.getElementById('aa-normal-card');
        const aaLargeCard = document.getElementById('aa-large-card');
        const aaaNormalCard = document.getElementById('aaa-normal-card');
        
        function updateContrast() {
            const fg = fgHex.value;
            const bg = bgHex.value;
            
            // Update preview
            previewBox.style.color = fg;
            previewBox.style.backgroundColor = bg;
            
            // Calculate contrast
            const ratio = getContrastRatio(fg, bg);
            ratioValue.textContent = ratio.toFixed(2) + ':1';
            
            // Check compliance
            const aaNormal = ratio >= 4.5;
            const aaLarge = ratio >= 3;
            const aaaNormal = ratio >= 7;
            
            // Update ratio card
            ratioCard.className = 'result-card ' + (aaNormal ? 'pass' : 'fail');
            document.getElementById('ratio-status').textContent = aaNormal ? 'PASS' : 'FAIL';
            
            // Update AA Normal
            aaNormalCard.className = 'result-card ' + (aaNormal ? 'pass' : 'fail');
            document.getElementById('aa-normal-status').textContent = aaNormal ? 'PASS' : 'FAIL';
            
            // Update AA Large
            aaLargeCard.className = 'result-card ' + (aaLarge ? 'pass' : 'fail');
            document.getElementById('aa-large-status').textContent = aaLarge ? 'PASS' : 'FAIL';
            
            // Update AAA Normal
            aaaNormalCard.className = 'result-card ' + (aaaNormal ? 'pass' : 'fail');
            document.getElementById('aaa-normal-status').textContent = aaaNormal ? 'PASS' : 'FAIL';
        }
        
        fgColor.addEventListener('input', (e) => {
            fgHex.value = e.target.value;
            updateContrast();
        });
        
        bgColor.addEventListener('input', (e) => {
            bgHex.value = e.target.value;
            updateContrast();
        });
        
        fgHex.addEventListener('input', (e) => {
            if (/^#[0-9A-Fa-f]{6}$/.test(e.target.value)) {
                fgColor.value = e.target.value;
                updateContrast();
            }
        });
        
        bgHex.addEventListener('input', (e) => {
            if (/^#[0-9A-Fa-f]{6}$/.test(e.target.value)) {
                bgColor.value = e.target.value;
                updateContrast();
            }
        });
        
        // MASE Palettes
        const palettes = [
            {
                name: 'Ocean Blue',
                primary: '#0077BE',
                secondary: '#00A8E8',
                accent: '#00C9FF',
                background: '#F0F8FF',
                text: '#1e293b'
            },
            {
                name: 'Forest Green',
                primary: '#2D5016',
                secondary: '#4A7C2C',
                accent: '#7CB342',
                background: '#F1F8E9',
                text: '#1e293b'
            },
            {
                name: 'Sunset Orange',
                primary: '#E65100',
                secondary: '#FF6F00',
                accent: '#FF9800',
                background: '#FFF3E0',
                text: '#1e293b'
            },
            {
                name: 'Royal Purple',
                primary: '#4A148C',
                secondary: '#6A1B9A',
                accent: '#9C27B0',
                background: '#F3E5F5',
                text: '#1e293b'
            },
            {
                name: 'Crimson Red',
                primary: '#B71C1C',
                secondary: '#D32F2F',
                accent: '#F44336',
                background: '#FFEBEE',
                text: '#1e293b'
            },
            {
                name: 'Midnight Dark',
                primary: '#1a1a2e',
                secondary: '#16213e',
                accent: '#0f3460',
                background: '#0a0e27',
                text: '#e2e8f0'
            },
            {
                name: 'Slate Gray',
                primary: '#37474F',
                secondary: '#546E7A',
                accent: '#78909C',
                background: '#ECEFF1',
                text: '#1e293b'
            },
            {
                name: 'Teal Cyan',
                primary: '#00695C',
                secondary: '#00897B',
                accent: '#26A69A',
                background: '#E0F2F1',
                text: '#1e293b'
            },
            {
                name: 'Amber Gold',
                primary: '#FF6F00',
                secondary: '#FF8F00',
                accent: '#FFA000',
                background: '#FFF8E1',
                text: '#1e293b'
            },
            {
                name: 'Pink Rose',
                primary: '#AD1457',
                secondary: '#C2185B',
                accent: '#E91E63',
                background: '#FCE4EC',
                text: '#1e293b'
            }
        ];
        
        const paletteTests = document.getElementById('palette-tests');
        
        palettes.forEach(palette => {
            const div = document.createElement('div');
            div.className = 'palette-test';
            
            const colors = [
                { name: 'Primary', color: palette.primary },
                { name: 'Secondary', color: palette.secondary },
                { name: 'Accent', color: palette.accent },
                { name: 'Background', color: palette.background }
            ];
            
            let html = `<h3>${palette.name}</h3><div class="palette-colors">`;
            
            colors.forEach(c => {
                const ratio = getContrastRatio(palette.text, c.color);
                html += `
                    <div class="color-sample" style="background: ${c.color}; color: ${palette.text}">
                        ${c.name}<br>
                        <small>${c.color}</small><br>
                        <small>${ratio.toFixed(2)}:1</small>
                    </div>
                `;
            });
            
            html += '</div><div class="contrast-results">';
            
            // Test each color against text
            colors.forEach(c => {
                const ratio = getContrastRatio(palette.text, c.color);
                const aaNormal = ratio >= 4.5;
                const aaLarge = ratio >= 3;
                
                html += `
                    <span class="contrast-badge ${aaNormal ? 'pass' : 'fail'}">
                        ${c.name}: ${ratio.toFixed(2)}:1 ${aaNormal ? 'âœ“ AA' : 'âœ— AA'}
                    </span>
                `;
            });
            
            html += '</div>';
            div.innerHTML = html;
            paletteTests.appendChild(div);
        });
        
        // Initial update
        updateContrast();
    </script>
</body>
</html>
