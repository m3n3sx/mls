<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Mode Responsive Test - Task 9</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f0f0f1;
            color: #1d2327;
            transition: background-color 0.3s, color 0.3s;
        }
        
        html[data-theme="dark"] body,
        body.mase-dark-mode {
            background: #1d2327;
            color: #f0f0f1;
        }
        
        /* Test Container */
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: #1d2327;
            border-bottom: 2px solid #2271b1;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        html[data-theme="dark"] h1 {
            color: #f0f0f1;
            border-bottom-color: #4a90d9;
        }
        
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2271b1;
            padding: 15px;
            margin: 20px 0;
        }
        
        html[data-theme="dark"] .info-box {
            background: #1a2b3c;
            border-left-color: #4a90d9;
        }
        
        /* Viewport Simulator */
        .viewport-simulator {
            background: white;
            border: 2px solid #c3c4c7;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        html[data-theme="dark"] .viewport-simulator {
            background: #2c3338;
            border-color: #50575e;
        }
        
        .viewport-controls {
            background: #f6f7f7;
            padding: 15px;
            border-bottom: 1px solid #c3c4c7;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        html[data-theme="dark"] .viewport-controls {
            background: #1d2327;
            border-bottom-color: #50575e;
        }
        
        .viewport-btn {
            padding: 8px 16px;
            border: 1px solid #c3c4c7;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .viewport-btn:hover {
            background: #f0f0f1;
            border-color: #2271b1;
        }
        
        .viewport-btn.active {
            background: #2271b1;
            color: white;
            border-color: #2271b1;
        }
        
        html[data-theme="dark"] .viewport-btn {
            background: #2c3338;
            border-color: #50575e;
            color: #f0f0f1;
        }
        
        html[data-theme="dark"] .viewport-btn:hover {
            background: #3c434a;
        }
        
        .viewport-info {
            margin-left: auto;
            font-size: 13px;
            color: #666;
        }
        
        html[data-theme="dark"] .viewport-info {
            color: #999;
        }
        
        .viewport-frame {
            background: #f0f0f1;
            padding: 20px;
            transition: width 0.3s ease;
            margin: 0 auto;
        }
        
        html[data-theme="dark"] .viewport-frame {
            background: #1d2327;
        }
        
        /* Simulated MASE Header */
        .mase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 24px;
            padding: 24px;
            background-color: white;
            border-bottom: 1px solid #c3c4c7;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        html[data-theme="dark"] .mase-header {
            background-color: #2c3338;
            border-bottom-color: #50575e;
        }
        
        .mase-header-left {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .mase-header-title {
            font-size: 24px;
            font-weight: 600;
            color: #1d2327;
            margin: 0;
        }
        
        html[data-theme="dark"] .mase-header-title {
            color: #f0f0f1;
        }
        
        .mase-version-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            font-size: 12px;
            font-weight: 600;
            background-color: #2271b1;
            color: white;
            border-radius: 4px;
        }
        
        .mase-header-right {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        /* Header Toggle Styles */
        .mase-header-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #f6f7f7;
            border-radius: 4px;
            border: 1px solid #c3c4c7;
            font-size: 14px;
            font-weight: 500;
            color: #1d2327;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            white-space: nowrap;
        }
        
        html[data-theme="dark"] .mase-header-toggle {
            background-color: #3c434a;
            border-color: #50575e;
            color: #f0f0f1;
        }
        
        .mase-header-toggle:hover {
            background-color: #e5e7eb;
            border-color: #9ca3af;
        }
        
        html[data-theme="dark"] .mase-header-toggle:hover {
            background-color: #50575e;
            border-color: #6b7280;
        }
        
        .mase-header-toggle input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none;
        }
        
        .mase-header-toggle .dashicons {
            font-size: 18px;
            width: 18px;
            height: 18px;
            color: #6b7280;
        }
        
        html[data-theme="dark"] .mase-header-toggle .dashicons {
            color: #9ca3af;
        }
        
        .mase-header-toggle input:checked ~ .dashicons {
            color: #2271b1;
        }
        
        .button {
            padding: 8px 16px;
            border: 1px solid #c3c4c7;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .button-primary {
            background: #2271b1;
            color: white;
            border-color: #2271b1;
        }
        
        .dashicons {
            display: inline-block;
            width: 18px;
            height: 18px;
            font-size: 18px;
            line-height: 1;
            font-family: dashicons;
            text-decoration: inherit;
            font-weight: normal;
            font-style: normal;
            vertical-align: middle;
            text-align: center;
        }
        
        .dashicons-admin-appearance:before {
            content: "\f100";
        }
        
        .dashicons-visibility:before {
            content: "\f177";
        }
        
        .dashicons-saved:before {
            content: "\f147";
        }
        
        /* Responsive Breakpoints */
        @media (max-width: 767px) {
            .mase-header {
                flex-direction: column;
                gap: 16px;
                padding: 16px;
            }
            
            .mase-header-left {
                width: 100%;
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .mase-header-title {
                font-size: 20px;
            }
            
            .mase-header-right {
                width: 100%;
                flex-direction: column;
                gap: 12px;
            }
            
            .mase-header-toggle {
                width: 100%;
                justify-content: center;
                min-height: 44px;
                padding: 12px 16px;
            }
            
            .button {
                width: 100%;
                justify-content: center;
                min-height: 44px;
                padding: 12px 16px;
            }
        }
        
        @media (min-width: 768px) and (max-width: 1024px) {
            .mase-header {
                padding: 20px;
            }
            
            .mase-header-title {
                font-size: 22px;
            }
            
            .mase-header-right {
                flex-wrap: wrap;
            }
        }
        
        /* Test Checklist */
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #c3c4c7;
        }
        
        html[data-theme="dark"] .test-section {
            background: #2c3338;
            border-color: #50575e;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #1d2327;
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        html[data-theme="dark"] .test-section h2 {
            color: #f0f0f1;
        }
        
        .checklist {
            background: #f6f7f7;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        
        html[data-theme="dark"] .checklist {
            background: #1d2327;
        }
        
        .checklist-item {
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 3px;
            display: flex;
            align-items: center;
        }
        
        html[data-theme="dark"] .checklist-item {
            background: #2c3338;
        }
        
        .checklist-item input[type="checkbox"] {
            margin-right: 10px;
        }
        
        .test-instructions {
            background: #f0f6fc;
            border-left: 4px solid #2271b1;
            padding: 15px;
            margin: 15px 0;
        }
        
        html[data-theme="dark"] .test-instructions {
            background: #1a2b3c;
            border-left-color: #4a90d9;
        }
        
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .test-result.pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-result.fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .measurement-display {
            background: #f6f7f7;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            font-family: monospace;
        }
        
        html[data-theme="dark"] .measurement-display {
            background: #1d2327;
        }
        
        .measurement-item {
            padding: 5px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        html[data-theme="dark"] .measurement-item {
            border-bottom-color: #50575e;
        }
        
        .measurement-item:last-child {
            border-bottom: none;
        }
        
        .measurement-label {
            font-weight: 600;
            color: #2271b1;
        }
        
        html[data-theme="dark"] .measurement-label {
            color: #4a90d9;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dashicons/0.9.0/dashicons.min.css">
</head>
<body>
    <div class="test-container">
        <h1>ðŸ“± Dark Mode Responsive Behavior Test - Task 9</h1>
        
        <div class="info-box">
            <strong>Test Purpose:</strong> Test the dark mode toggle's responsive behavior across different screen sizes (mobile 375px, tablet 768px, desktop 1920px).
            <br><br>
            <strong>Requirements Tested:</strong> 1.1, 1.2, 1.3, 1.4
        </div>
        
        <!-- Viewport Simulator: Desktop (1920px) -->
        <div class="viewport-simulator">
            <div class="viewport-controls">
                <button class="viewport-btn active" onclick="setViewport(1920)">Desktop (1920px)</button>
                <button class="viewport-btn" onclick="setViewport(768)">Tablet (768px)</button>
                <button class="viewport-btn" onclick="setViewport(375)">Mobile (375px)</button>
                <span class="viewport-info">Current: <span id="current-width">1920</span>px</span>
            </div>
            <div class="viewport-frame" id="viewport-frame" style="width: 1920px;">
                <div class="mase-header">
                    <div class="mase-header-left">
                        <h1 class="mase-header-title">Modern Admin Styler</h1>
                        <span class="mase-version-badge">v1.2.0</span>
                    </div>
                    <div class="mase-header-right">
                        <!-- Dark Mode Toggle -->
                        <label class="mase-header-toggle" id="dark-mode-toggle">
                            <input 
                                type="checkbox" 
                                id="mase-dark-mode-toggle"
                                name="mase_dark_mode" 
                                value="1"
                                role="switch"
                                aria-checked="false"
                                aria-label="Toggle dark mode for entire admin"
                            />
                            <span class="dashicons dashicons-admin-appearance" aria-hidden="true"></span>
                            <span>Dark Mode</span>
                        </label>
                        <!-- Live Preview Toggle -->
                        <label class="mase-header-toggle">
                            <input 
                                type="checkbox" 
                                id="mase-live-preview-toggle"
                                checked
                                role="switch"
                                aria-checked="true"
                            />
                            <span class="dashicons dashicons-visibility" aria-hidden="true"></span>
                            <span>Live Preview</span>
                        </label>
                        <button type="button" class="button button-primary">
                            <span class="dashicons dashicons-saved"></span>
                            <span>Save Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test 1: Desktop Layout (1920px) -->
        <div class="test-section">
            <h2>Test 1: Desktop Layout (1920px)</h2>
            <p><strong>Requirements:</strong> 1.1, 1.2, 1.3, 1.4</p>
            
            <div class="test-instructions">
                <strong>Test Steps:</strong>
                <ol>
                    <li>Click "Desktop (1920px)" button above</li>
                    <li>Verify header layout is horizontal with left and right sections</li>
                    <li>Verify dark mode toggle appears before Live Preview toggle</li>
                    <li>Verify icon and label are both visible</li>
                    <li>Verify spacing is consistent with other header controls</li>
                    <li>Click "Measure Elements" button to check dimensions</li>
                </ol>
            </div>
            
            <button class="viewport-btn" onclick="measureElements(1920)">Measure Elements</button>
            <div id="measurements-1920" class="measurement-display" style="display:none;"></div>
            
            <div class="checklist">
                <strong>Verification Checklist:</strong>
                <div class="checklist-item">
                    <input type="checkbox" id="check-1-1">
                    <label for="check-1-1">Header layout is horizontal (flex-direction: row)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-1-2">
                    <label for="check-1-2">Dark mode toggle appears before Live Preview toggle</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-1-3">
                    <label for="check-1-3">Icon (moon) is visible and properly sized</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-1-4">
                    <label for="check-1-4">Label text "Dark Mode" is visible</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-1-5">
                    <label for="check-1-5">Spacing between toggles is consistent (16px gap)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-1-6">
                    <label for="check-1-6">Toggle is clickable and functional</label>
                </div>
            </div>
        </div>
        
        <!-- Test 2: Tablet Layout (768px) -->
        <div class="test-section">
            <h2>Test 2: Tablet Layout (768px)</h2>
            <p><strong>Requirements:</strong> 1.1, 1.2, 1.3, 1.4</p>
            
            <div class="test-instructions">
                <strong>Test Steps:</strong>
                <ol>
                    <li>Click "Tablet (768px)" button above</li>
                    <li>Verify header layout adapts to tablet size</li>
                    <li>Verify dark mode toggle remains accessible</li>
                    <li>Verify icon and label display correctly</li>
                    <li>Verify no text truncation or overlap</li>
                    <li>Click "Measure Elements" button to check dimensions</li>
                </ol>
            </div>
            
            <button class="viewport-btn" onclick="measureElements(768)">Measure Elements</button>
            <div id="measurements-768" class="measurement-display" style="display:none;"></div>
            
            <div class="checklist">
                <strong>Verification Checklist:</strong>
                <div class="checklist-item">
                    <input type="checkbox" id="check-2-1">
                    <label for="check-2-1">Header layout adapts properly (may wrap)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-2-2">
                    <label for="check-2-2">Dark mode toggle remains visible and accessible</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-2-3">
                    <label for="check-2-3">Icon and label both display correctly</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-2-4">
                    <label for="check-2-4">No text truncation or ellipsis</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-2-5">
                    <label for="check-2-5">No overlap with other controls</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-2-6">
                    <label for="check-2-6">Toggle is clickable and functional</label>
                </div>
            </div>
        </div>
        
        <!-- Test 3: Mobile Layout (375px) -->
        <div class="test-section">
            <h2>Test 3: Mobile Layout (375px)</h2>
            <p><strong>Requirements:</strong> 1.1, 1.2, 1.3, 1.4</p>
            
            <div class="test-instructions">
                <strong>Test Steps:</strong>
                <ol>
                    <li>Click "Mobile (375px)" button above</li>
                    <li>Verify header stacks vertically</li>
                    <li>Verify dark mode toggle is full width</li>
                    <li>Verify minimum touch target size (44x44px)</li>
                    <li>Verify icon and label display correctly</li>
                    <li>Click "Measure Elements" button to check dimensions</li>
                </ol>
            </div>
            
            <button class="viewport-btn" onclick="measureElements(375)">Measure Elements</button>
            <div id="measurements-375" class="measurement-display" style="display:none;"></div>
            
            <div class="checklist">
                <strong>Verification Checklist:</strong>
                <div class="checklist-item">
                    <input type="checkbox" id="check-3-1">
                    <label for="check-3-1">Header layout is vertical (flex-direction: column)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-3-2">
                    <label for="check-3-2">Dark mode toggle is full width</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-3-3">
                    <label for="check-3-3">Toggle height meets minimum 44px touch target</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-3-4">
                    <label for="check-3-4">Icon and label both visible and centered</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-3-5">
                    <label for="check-3-5">Text is not truncated</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-3-6">
                    <label for="check-3-6">Toggle is easily tappable on mobile</label>
                </div>
            </div>
        </div>
        
        <!-- Test 4: Spacing Consistency -->
        <div class="test-section">
            <h2>Test 4: Spacing Consistency Across Screen Sizes</h2>
            <p><strong>Requirements:</strong> 1.1, 1.2, 1.3, 1.4</p>
            
            <div class="test-instructions">
                <strong>Test Steps:</strong>
                <ol>
                    <li>Switch between all three viewport sizes</li>
                    <li>Verify spacing between dark mode toggle and other controls is consistent</li>
                    <li>Verify internal padding of toggle remains consistent</li>
                    <li>Verify gap between icon and label is consistent</li>
                </ol>
            </div>
            
            <button class="viewport-btn" onclick="runSpacingTests()">Run Spacing Tests</button>
            <div id="spacing-results" class="measurement-display" style="display:none;"></div>
            
            <div class="checklist">
                <strong>Verification Checklist:</strong>
                <div class="checklist-item">
                    <input type="checkbox" id="check-4-1">
                    <label for="check-4-1">Gap between toggles is consistent (16px on desktop/tablet)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-4-2">
                    <label for="check-4-2">Internal padding is consistent (8px 16px)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-4-3">
                    <label for="check-4-3">Icon-label gap is consistent (8px)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check-4-4">
                    <label for="check-4-4">Visual alignment with other header controls</label>
                </div>
            </div>
        </div>
        
        <!-- Test 5: Automated Tests -->
        <div class="test-section">
            <h2>Test 5: Automated Responsive Tests</h2>
            <button class="viewport-btn" onclick="runAutomatedTests()">Run All Automated Tests</button>
            <div id="automated-results"></div>
        </div>
        
        <!-- Export Results -->
        <div class="test-section">
            <h2>Export Test Results</h2>
            <button class="viewport-btn" onclick="exportResults()">Export Results as JSON</button>
            <p style="margin-top: 10px; color: #666;">Export your test results for documentation.</p>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Mock MASE object with dark mode functionality
        var MASE = {
            toggleDarkMode: function(e) {
                var $checkbox = $(e.target);
                var isDark = $checkbox.is(':checked');
                
                console.log('MASE: Dark Mode toggled:', isDark ? 'ON' : 'OFF');
                
                if (isDark) {
                    $('html').attr('data-theme', 'dark');
                    $('body').addClass('mase-dark-mode');
                } else {
                    $('html').removeAttr('data-theme');
                    $('body').removeClass('mase-dark-mode');
                }
                
                $checkbox.attr('aria-checked', isDark ? 'true' : 'false');
            }
        };
        
        // Initialize on page load
        $(document).ready(function() {
            console.log('=== Dark Mode Responsive Test Started ===');
            $('#mase-dark-mode-toggle').on('change', MASE.toggleDarkMode.bind(MASE));
        });
        
        // Viewport control functions
        function setViewport(width) {
            const frame = document.getElementById('viewport-frame');
            frame.style.width = width + 'px';
            document.getElementById('current-width').textContent = width;
            
            // Update active button
            document.querySelectorAll('.viewport-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            console.log('Viewport set to:', width + 'px');
        }
        
        // Measure elements function
        function measureElements(viewport) {
            const toggle = document.getElementById('dark-mode-toggle');
            const header = document.querySelector('.mase-header');
            const headerRight = document.querySelector('.mase-header-right');
            const icon = toggle.querySelector('.dashicons');
            const label = toggle.querySelector('span:not(.dashicons)');
            
            const toggleRect = toggle.getBoundingClientRect();
            const headerRect = header.getBoundingClientRect();
            const headerRightRect = headerRight.getBoundingClientRect();
            
            const measurements = {
                viewport: viewport + 'px',
                toggle: {
                    width: Math.round(toggleRect.width) + 'px',
                    height: Math.round(toggleRect.height) + 'px',
                    padding: window.getComputedStyle(toggle).padding,
                    gap: window.getComputedStyle(toggle).gap
                },
                header: {
                    flexDirection: window.getComputedStyle(header).flexDirection,
                    gap: window.getComputedStyle(header).gap,
                    padding: window.getComputedStyle(header).padding
                },
                headerRight: {
                    flexDirection: window.getComputedStyle(headerRight).flexDirection,
                    gap: window.getComputedStyle(headerRight).gap,
                    width: Math.round(headerRightRect.width) + 'px'
                },
                icon: {
                    fontSize: window.getComputedStyle(icon).fontSize,
                    width: window.getComputedStyle(icon).width,
                    height: window.getComputedStyle(icon).height
                },
                label: {
                    fontSize: window.getComputedStyle(label).fontSize,
                    display: window.getComputedStyle(label).display
                }
            };
            
            // Display measurements
            const displayId = 'measurements-' + viewport;
            const display = document.getElementById(displayId);
            display.style.display = 'block';
            
            let html = '<h3>Measurements at ' + viewport + 'px</h3>';
            html += '<div class="measurement-item"><span class="measurement-label">Toggle Width:</span> ' + measurements.toggle.width + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Toggle Height:</span> ' + measurements.toggle.height + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Toggle Padding:</span> ' + measurements.toggle.padding + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Toggle Gap (icon-label):</span> ' + measurements.toggle.gap + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Header Flex Direction:</span> ' + measurements.header.flexDirection + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Header Gap:</span> ' + measurements.header.gap + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Header Right Flex Direction:</span> ' + measurements.headerRight.flexDirection + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Header Right Gap:</span> ' + measurements.headerRight.gap + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Icon Size:</span> ' + measurements.icon.fontSize + '</div>';
            html += '<div class="measurement-item"><span class="measurement-label">Label Font Size:</span> ' + measurements.label.fontSize + '</div>';
            
            display.innerHTML = html;
            
            console.log('Measurements at ' + viewport + 'px:', measurements);
            return measurements;
        }
        
        // Run spacing tests across all viewports
        function runSpacingTests() {
            const results = {
                desktop: measureElements(1920),
                tablet: measureElements(768),
                mobile: measureElements(375)
            };
            
            const display = document.getElementById('spacing-results');
            display.style.display = 'block';
            
            let html = '<h3>Spacing Comparison</h3>';
            html += '<table style="width:100%; border-collapse: collapse;">';
            html += '<tr><th style="text-align:left; padding:8px; border-bottom:1px solid #ccc;">Property</th>';
            html += '<th style="text-align:left; padding:8px; border-bottom:1px solid #ccc;">Desktop</th>';
            html += '<th style="text-align:left; padding:8px; border-bottom:1px solid #ccc;">Tablet</th>';
            html += '<th style="text-align:left; padding:8px; border-bottom:1px solid #ccc;">Mobile</th></tr>';
            
            html += '<tr><td style="padding:8px;">Toggle Padding</td>';
            html += '<td style="padding:8px;">' + results.desktop.toggle.padding + '</td>';
            html += '<td style="padding:8px;">' + results.tablet.toggle.padding + '</td>';
            html += '<td style="padding:8px;">' + results.mobile.toggle.padding + '</td></tr>';
            
            html += '<tr><td style="padding:8px;">Icon-Label Gap</td>';
            html += '<td style="padding:8px;">' + results.desktop.toggle.gap + '</td>';
            html += '<td style="padding:8px;">' + results.tablet.toggle.gap + '</td>';
            html += '<td style="padding:8px;">' + results.mobile.toggle.gap + '</td></tr>';
            
            html += '<tr><td style="padding:8px;">Header Right Gap</td>';
            html += '<td style="padding:8px;">' + results.desktop.headerRight.gap + '</td>';
            html += '<td style="padding:8px;">' + results.tablet.headerRight.gap + '</td>';
            html += '<td style="padding:8px;">' + results.mobile.headerRight.gap + '</td></tr>';
            
            html += '<tr><td style="padding:8px;">Toggle Height</td>';
            html += '<td style="padding:8px;">' + results.desktop.toggle.height + '</td>';
            html += '<td style="padding:8px;">' + results.tablet.toggle.height + '</td>';
            html += '<td style="padding:8px;">' + results.mobile.toggle.height + '</td></tr>';
            
            html += '</table>';
            
            display.innerHTML = html;
            console.log('Spacing test results:', results);
        }
        
        // Run automated tests
        function runAutomatedTests() {
            const results = [];
            
            // Test 1: Desktop layout
            setViewport(1920);
            setTimeout(() => {
                const header = document.querySelector('.mase-header');
                const flexDir = window.getComputedStyle(header).flexDirection;
                results.push({
                    name: 'Desktop: Header horizontal layout',
                    pass: flexDir === 'row',
                    message: flexDir === 'row' ? 'âœ“ Header is horizontal (row)' : 'âœ— Header is not horizontal: ' + flexDir
                });
                
                const toggle = document.getElementById('dark-mode-toggle');
                const toggleRect = toggle.getBoundingClientRect();
                results.push({
                    name: 'Desktop: Toggle is visible',
                    pass: toggleRect.width > 0 && toggleRect.height > 0,
                    message: toggleRect.width > 0 ? 'âœ“ Toggle is visible (' + Math.round(toggleRect.width) + 'x' + Math.round(toggleRect.height) + 'px)' : 'âœ— Toggle is not visible'
                });
                
                // Test 2: Tablet layout
                setViewport(768);
                setTimeout(() => {
                    const toggleRect2 = toggle.getBoundingClientRect();
                    results.push({
                        name: 'Tablet: Toggle remains visible',
                        pass: toggleRect2.width > 0 && toggleRect2.height > 0,
                        message: toggleRect2.width > 0 ? 'âœ“ Toggle is visible (' + Math.round(toggleRect2.width) + 'x' + Math.round(toggleRect2.height) + 'px)' : 'âœ— Toggle is not visible'
                    });
                    
                    // Test 3: Mobile layout
                    setViewport(375);
                    setTimeout(() => {
                        const headerMobile = document.querySelector('.mase-header');
                        const flexDirMobile = window.getComputedStyle(headerMobile).flexDirection;
                        results.push({
                            name: 'Mobile: Header vertical layout',
                            pass: flexDirMobile === 'column',
                            message: flexDirMobile === 'column' ? 'âœ“ Header is vertical (column)' : 'âœ— Header is not vertical: ' + flexDirMobile
                        });
                        
                        const toggleRect3 = toggle.getBoundingClientRect();
                        const minTouchTarget = 44;
                        results.push({
                            name: 'Mobile: Toggle meets minimum touch target (44px)',
                            pass: toggleRect3.height >= minTouchTarget,
                            message: toggleRect3.height >= minTouchTarget ? 'âœ“ Toggle height is ' + Math.round(toggleRect3.height) + 'px (â‰¥44px)' : 'âœ— Toggle height is ' + Math.round(toggleRect3.height) + 'px (<44px)'
                        });
                        
                        const headerRight = document.querySelector('.mase-header-right');
                        const headerRightRect = headerRight.getBoundingClientRect();
                        const frameRect = document.getElementById('viewport-frame').getBoundingClientRect();
                        const isFullWidth = Math.abs(headerRightRect.width - frameRect.width) < 50; // Allow some padding
                        results.push({
                            name: 'Mobile: Toggle container is full width',
                            pass: isFullWidth,
                            message: isFullWidth ? 'âœ“ Header right section is full width' : 'âœ— Header right section is not full width'
                        });
                        
                        // Display results
                        displayAutomatedResults(results);
                    }, 500);
                }, 500);
            }, 500);
        }
        
        function displayAutomatedResults(results) {
            let html = '<h3>Automated Test Results</h3>';
            results.forEach(function(test) {
                html += '<div class="test-result ' + (test.pass ? 'pass' : 'fail') + '">';
                html += '<strong>' + test.name + '</strong><br>';
                html += test.message;
                html += '</div>';
            });
            
            document.getElementById('automated-results').innerHTML = html;
            
            console.log('=== Automated Test Results ===');
            results.forEach(function(test) {
                console.log((test.pass ? 'âœ“' : 'âœ—') + ' ' + test.name + ': ' + test.message);
            });
        }
        
        // Export results function
        function exportResults() {
            const results = {
                timestamp: new Date().toISOString(),
                testSuite: 'Task 9: Dark Mode Responsive Behavior Test',
                tests: {
                    desktop: {
                        name: 'Desktop Layout (1920px)',
                        checks: [
                            { id: 'check-1-1', checked: $('#check-1-1').is(':checked'), label: 'Header layout is horizontal' },
                            { id: 'check-1-2', checked: $('#check-1-2').is(':checked'), label: 'Dark mode toggle appears before Live Preview' },
                            { id: 'check-1-3', checked: $('#check-1-3').is(':checked'), label: 'Icon is visible and properly sized' },
                            { id: 'check-1-4', checked: $('#check-1-4').is(':checked'), label: 'Label text is visible' },
                            { id: 'check-1-5', checked: $('#check-1-5').is(':checked'), label: 'Spacing is consistent' },
                            { id: 'check-1-6', checked: $('#check-1-6').is(':checked'), label: 'Toggle is functional' }
                        ]
                    },
                    tablet: {
                        name: 'Tablet Layout (768px)',
                        checks: [
                            { id: 'check-2-1', checked: $('#check-2-1').is(':checked'), label: 'Header layout adapts properly' },
                            { id: 'check-2-2', checked: $('#check-2-2').is(':checked'), label: 'Toggle remains accessible' },
                            { id: 'check-2-3', checked: $('#check-2-3').is(':checked'), label: 'Icon and label display correctly' },
                            { id: 'check-2-4', checked: $('#check-2-4').is(':checked'), label: 'No text truncation' },
                            { id: 'check-2-5', checked: $('#check-2-5').is(':checked'), label: 'No overlap with other controls' },
                            { id: 'check-2-6', checked: $('#check-2-6').is(':checked'), label: 'Toggle is functional' }
                        ]
                    },
                    mobile: {
                        name: 'Mobile Layout (375px)',
                        checks: [
                            { id: 'check-3-1', checked: $('#check-3-1').is(':checked'), label: 'Header layout is vertical' },
                            { id: 'check-3-2', checked: $('#check-3-2').is(':checked'), label: 'Toggle is full width' },
                            { id: 'check-3-3', checked: $('#check-3-3').is(':checked'), label: 'Meets minimum 44px touch target' },
                            { id: 'check-3-4', checked: $('#check-3-4').is(':checked'), label: 'Icon and label visible and centered' },
                            { id: 'check-3-5', checked: $('#check-3-5').is(':checked'), label: 'Text is not truncated' },
                            { id: 'check-3-6', checked: $('#check-3-6').is(':checked'), label: 'Toggle is easily tappable' }
                        ]
                    },
                    spacing: {
                        name: 'Spacing Consistency',
                        checks: [
                            { id: 'check-4-1', checked: $('#check-4-1').is(':checked'), label: 'Gap between toggles is consistent' },
                            { id: 'check-4-2', checked: $('#check-4-2').is(':checked'), label: 'Internal padding is consistent' },
                            { id: 'check-4-3', checked: $('#check-4-3').is(':checked'), label: 'Icon-label gap is consistent' },
                            { id: 'check-4-4', checked: $('#check-4-4').is(':checked'), label: 'Visual alignment with other controls' }
                        ]
                    }
                }
            };
            
            // Calculate summary
            let totalChecks = 0;
            let passedChecks = 0;
            Object.values(results.tests).forEach(test => {
                test.checks.forEach(check => {
                    totalChecks++;
                    if (check.checked) passedChecks++;
                });
            });
            
            results.summary = {
                total: totalChecks,
                passed: passedChecks,
                failed: totalChecks - passedChecks,
                percentage: Math.round((passedChecks / totalChecks) * 100)
            };
            
            // Download as JSON
            const dataStr = JSON.stringify(results, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
            const exportFileDefaultName = 'task-9-responsive-test-results.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            console.log('Test results exported:', results);
            alert('Test results exported successfully!\n\nPassed: ' + passedChecks + '/' + totalChecks + ' (' + results.summary.percentage + '%)');
        }
    </script>
</body>
</html>
